class t{constructor(){this.monthNames=["Meskerem","Tikimt","Hidar","Tahsas","Tir","Yekatit","Megabit","Miazia","Ginbot","Sene","Hamle","Nehase","Pagume"],this.monthNamesAmharic=["መስከረም","ጥቅምት","ኅዳር","ታኅሣሥ","ጥር","የካቲት","መጋቢት","ሚያዝያ","ግንቦት","ሰኔ","ሐምሌ","ነሐሴ","ጳጉሜን"],this.dayNames=["Ehud","Segno","Maksegno","Erob","Hamus","Arb","Kidame"],this.dayNamesAmharic=["እሁድ","ሰኞ","ማክሰኞ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"]}toEthiopian(t){const e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=Math.floor((14-a)/12),s=e+4800-n,r=a+12*n-3;let o=i+Math.floor((153*r+2)/5)+365*s+Math.floor(s/4)-Math.floor(s/100)+Math.floor(s/400)-32045;const h=(o-1723856)%1461,c=h%365+365*Math.floor(h/1460);return{year:Math.floor((o-1723856)/1461)+1,month:Math.floor(c/30)+1,day:c%30+1}}toGregorian(t,e,a){const i=1461*(t-1)/4+30*(e-1)+a+1723856+32044,n=Math.floor((4*i+3)/146097),s=i-Math.floor(146097*n/4),r=Math.floor((4*s+3)/1461),o=s-Math.floor(1461*r/4),h=Math.floor((5*o+2)/153),c=o-Math.floor((153*h+2)/5)+1,l=h+3-12*Math.floor(h/10),d=100*n+r-4800+Math.floor(h/10);return new Date(d,l-1,c)}getDaysInMonth(t,e){return e<13?30:this.isLeapYear(t)?6:5}isLeapYear(t){return t%4==3}getDayOfWeek(t,e,a){return this.toGregorian(t,e,a).getDay()}getMonthName(t,e=!1){return(e?this.monthNamesAmharic:this.monthNames)[t-1]||""}getDayName(t,e=!1){return(e?this.dayNamesAmharic:this.dayNames)[t]||""}toEthiopicNumeral(t){if(0===t)return"0";const e={1:"፩",2:"፪",3:"፫",4:"፬",5:"፭",6:"፮",7:"፯",8:"፰",9:"፱",10:"፲",20:"፳",30:"፴",40:"፵",50:"፶",60:"፷",70:"፸",80:"፹",90:"፺",100:"፻",1e4:"፼"};if(e[t])return e[t];let a="",i=t;if(i<100){const t=10*Math.floor(i/10),n=i%10;return t>0&&(a+=e[t]),n>0&&(a+=e[n]),a}return t.toString().split("").map(t=>e[parseInt(t)]||t).join("")}now(){return this.toEthiopian(new Date)}}class e{constructor(e={}){this.calendar=new t,this.options={onSelect:e.onSelect||null,inputElement:e.inputElement||null,initialDate:e.initialDate||new Date,showGregorian:void 0===e.showGregorian||e.showGregorian,useAmharic:void 0===e.useAmharic||e.useAmharic,useEthiopicNumbers:void 0!==e.useEthiopicNumbers&&e.useEthiopicNumbers,...e},this.currentEthDate=this.calendar.toEthiopian(this.options.initialDate),this.selectedDate=null,this.popup=null}show(){this.popup?this.popup.style.display="block":(this.popup=this.createPopup(),document.body.appendChild(this.popup),this.options.inputElement&&this.positionPopup(),this.render(),this.attachEventListeners())}hide(){this.popup&&(this.popup.style.display="none")}destroy(){this.popup&&(this.popup.remove(),this.popup=null)}createPopup(){const t=document.createElement("div");t.className="ethcal-popup";const e=this.options.useAmharic?"<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>":"<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>";return t.innerHTML=`\n      <div class="ethcal-options">\n        <label>\n          <input type="checkbox" class="ethcal-option-amharic" ${this.options.useAmharic?"checked":""}>\n          <span>Use Amharic</span>\n        </label>\n        <label>\n          <input type="checkbox" class="ethcal-option-ethiopic" ${this.options.useEthiopicNumbers?"checked":""}>\n          <span>Ethiopic Numbers</span>\n        </label>\n      </div>\n      <div class="ethcal-calendars">\n        <div class="ethcal-calendar ethcal-ethiopian">\n          <div class="ethcal-calendar-title">Ethiopian Calendar</div>\n          <div class="ethcal-header">\n            <button class="ethcal-prev-year" aria-label="Previous Year">&laquo;</button>\n            <button class="ethcal-prev-month" aria-label="Previous Month">&lsaquo;</button>\n            <div class="ethcal-current">\n              <span class="ethcal-month-name"></span>\n              <span class="ethcal-year"></span>\n            </div>\n            <button class="ethcal-next-month" aria-label="Next Month">&rsaquo;</button>\n            <button class="ethcal-next-year" aria-label="Next Year">&raquo;</button>\n          </div>\n          <div class="ethcal-weekdays">${e}</div>\n          <div class="ethcal-days"></div>\n        </div>\n        ${this.options.showGregorian?'\n        <div class="ethcal-calendar ethcal-gregorian">\n          <div class="ethcal-calendar-title">Gregorian Calendar</div>\n          <div class="ethcal-header">\n            <button class="ethcal-greg-prev-year" aria-label="Previous Year">&laquo;</button>\n            <button class="ethcal-greg-prev-month" aria-label="Previous Month">&lsaquo;</button>\n            <div class="ethcal-current">\n              <span class="ethcal-greg-month-name"></span>\n              <span class="ethcal-greg-year"></span>\n            </div>\n            <button class="ethcal-greg-next-month" aria-label="Next Month">&rsaquo;</button>\n            <button class="ethcal-greg-next-year" aria-label="Next Year">&raquo;</button>\n          </div>\n          <div class="ethcal-weekdays">\n            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>\n          </div>\n          <div class="ethcal-greg-days"></div>\n        </div>\n        ':""}\n      </div>\n      <div class="ethcal-footer">\n        <button class="ethcal-today">Today</button>\n        <button class="ethcal-close">Close</button>\n      </div>\n    `,t}positionPopup(){const t=this.options.inputElement.getBoundingClientRect();this.popup.style.position="absolute",this.popup.style.top=t.bottom+window.scrollY+5+"px",this.popup.style.left=t.left+window.scrollX+"px"}render(){const{year:t,month:e}=this.currentEthDate;this.popup.querySelector(".ethcal-month-name").textContent=this.calendar.getMonthName(e,this.options.useAmharic);const a=this.options.useEthiopicNumbers?this.calendar.toEthiopicNumeral(t):t;this.popup.querySelector(".ethcal-year").textContent=a,this.updateWeekdayNames(),this.renderDays(),this.options.showGregorian&&this.renderGregorianCalendar()}updateWeekdayNames(){const t=this.popup.querySelector(".ethcal-ethiopian .ethcal-weekdays");this.options.useAmharic?t.innerHTML="<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>":t.innerHTML="<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>"}renderDays(){const{year:t,month:e}=this.currentEthDate,a=this.popup.querySelector(".ethcal-days");a.innerHTML="";const i=this.calendar.getDaysInMonth(t,e),n=this.calendar.getDayOfWeek(t,e,1);for(let t=0;t<n;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",a.appendChild(t)}for(let n=1;n<=i;n++){const i=document.createElement("div");i.className="ethcal-day";const s=this.options.useEthiopicNumbers?this.calendar.toEthiopicNumeral(n):n;i.textContent=s,i.dataset.day=n,i.dataset.month=e,i.dataset.year=t;const r=this.calendar.now();t===r.year&&e===r.month&&n===r.day&&i.classList.add("ethcal-today-highlight"),this.selectedDate&&t===this.selectedDate.year&&e===this.selectedDate.month&&n===this.selectedDate.day&&i.classList.add("ethcal-selected"),a.appendChild(i)}}renderGregorianCalendar(){const{year:t,month:e}=this.currentEthDate,a=this.calendar.toGregorian(t,e,1),i=a.getFullYear(),n=a.getMonth();this.popup.querySelector(".ethcal-greg-month-name").textContent=["January","February","March","April","May","June","July","August","September","October","November","December"][n],this.popup.querySelector(".ethcal-greg-year").textContent=i;const s=this.popup.querySelector(".ethcal-greg-days");s.innerHTML="";const r=new Date(i,n,1).getDay(),o=new Date(i,n+1,0).getDate();for(let t=0;t<r;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",s.appendChild(t)}const h=new Date;for(let t=1;t<=o;t++){const e=document.createElement("div");if(e.className="ethcal-day ethcal-greg-day",e.textContent=t,e.dataset.day=t,e.dataset.month=n,e.dataset.year=i,i===h.getFullYear()&&n===h.getMonth()&&t===h.getDate()&&e.classList.add("ethcal-today-highlight"),this.selectedDate){const a=this.calendar.toGregorian(this.selectedDate.year,this.selectedDate.month,this.selectedDate.day);i===a.getFullYear()&&n===a.getMonth()&&t===a.getDate()&&e.classList.add("ethcal-selected")}s.appendChild(e)}}attachEventListeners(){this.popup.querySelector(".ethcal-option-amharic").addEventListener("change",t=>{this.options.useAmharic=t.target.checked,this.render()}),this.popup.querySelector(".ethcal-option-ethiopic").addEventListener("change",t=>{this.options.useEthiopicNumbers=t.target.checked,this.render()}),this.popup.querySelector(".ethcal-prev-year").addEventListener("click",()=>{this.currentEthDate.year--,this.render()}),this.popup.querySelector(".ethcal-next-year").addEventListener("click",()=>{this.currentEthDate.year++,this.render()}),this.popup.querySelector(".ethcal-prev-month").addEventListener("click",()=>{this.currentEthDate.month--,this.currentEthDate.month<1&&(this.currentEthDate.month=13,this.currentEthDate.year--),this.render()}),this.popup.querySelector(".ethcal-next-month").addEventListener("click",()=>{this.currentEthDate.month++,this.currentEthDate.month>13&&(this.currentEthDate.month=1,this.currentEthDate.year++),this.render()}),this.options.showGregorian&&(this.popup.querySelector(".ethcal-greg-prev-year").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setFullYear(t.getFullYear()-1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-next-year").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setFullYear(t.getFullYear()+1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-prev-month").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setMonth(t.getMonth()-1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-next-month").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setMonth(t.getMonth()+1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-days").addEventListener("click",t=>{if(t.target.classList.contains("ethcal-greg-day")){const e=parseInt(t.target.dataset.day),a=parseInt(t.target.dataset.month),i=parseInt(t.target.dataset.year),n=new Date(i,a,e),s=this.calendar.toEthiopian(n);this.selectedDate=s,this.currentEthDate=s,this.render(),this.options.onSelect&&this.options.onSelect({ethiopian:s,gregorian:n}),this.options.inputElement&&(this.options.inputElement.value=`${s.day}/${s.month}/${s.year}`),this.hide()}})),this.popup.querySelector(".ethcal-days").addEventListener("click",t=>{if(t.target.classList.contains("ethcal-day")&&!t.target.classList.contains("ethcal-empty")){const e=parseInt(t.target.dataset.day),a=parseInt(t.target.dataset.month),i=parseInt(t.target.dataset.year);if(this.selectedDate={year:i,month:a,day:e},this.render(),this.options.onSelect){const t=this.calendar.toGregorian(i,a,e);this.options.onSelect({ethiopian:{year:i,month:a,day:e},gregorian:t})}this.options.inputElement&&(this.options.inputElement.value=`${e}/${a}/${i}`),this.hide()}}),this.popup.querySelector(".ethcal-today").addEventListener("click",()=>{this.currentEthDate=this.calendar.now(),this.render()}),this.popup.querySelector(".ethcal-close").addEventListener("click",()=>{this.hide()}),document.addEventListener("click",t=>{this.popup&&!this.popup.contains(t.target)&&t.target!==this.options.inputElement&&this.hide()})}setDate(t){this.currentEthDate=this.calendar.toEthiopian(t),this.popup&&this.render()}getSelectedDate(){return this.selectedDate}}export{t as EthiopianCalendar,e as EthiopianCalendarUI};
//# sourceMappingURL=ethcal-ui.esm.js.map
