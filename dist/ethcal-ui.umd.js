!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).EthiopianCalendarUI={})}(this,function(t){"use strict";var e,a,n,r={},i={},s={},o={},h={};function d(){return e||(e=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DateValidator=t.LeapYearValidator=t.PAGUME_LEAP_YEAR_LAST_DAY=t.PAGUME_LAST_DAY=t.LAST_MONTH=t.LAST_DAY=t.FIRST_MONTH=t.FIRST_DAY=void 0,t.FIRST_DAY=1,t.FIRST_MONTH=t.FIRST_DAY,t.LAST_DAY=30,t.LAST_MONTH=13,t.PAGUME_LAST_DAY=5,t.PAGUME_LEAP_YEAR_LAST_DAY=6;class e{constructor(t){this.year=t}isValid(){return this.isValidInteger(this.year)&&this.isLeapYear()}isLeapYear(){return(this.year+1)%4==0}isValidInteger(...t){return t.every(t=>Number.isInteger(t)&&t>=0)}}t.LeapYearValidator=e;t.DateValidator=class{constructor(t,e,a){this.day=t,this.month=e,this.year=a}isValid(){return[()=>this.isDateValuesIntegers(),()=>this.isValidDayRange(),()=>this.isValidMonthRange(),()=>this.isValidPagumeDayRange(),()=>this.isValidLeapDay()].every(t=>t())}isValidDayRange(){return this.day>=t.FIRST_DAY&&this.day<=t.LAST_DAY}isValidMonthRange(){return this.month>=t.FIRST_MONTH&&this.month<=t.LAST_MONTH}isValidPagumeDayRange(){return this.month!==t.LAST_MONTH||this.day<=t.PAGUME_LEAP_YEAR_LAST_DAY}isValidLeapDay(){return this.month!==t.LAST_MONTH||this.day!==t.PAGUME_LEAP_YEAR_LAST_DAY||new e(this.year).isValid()}isDateValuesIntegers(){return Number.isInteger(this.day)&&Number.isInteger(this.month)&&Number.isInteger(this.year)&&this.day>=0&&this.month>=0&&this.year>=0}}}(h)),h}function l(){if(a)return o;a=1,Object.defineProperty(o,"__esModule",{value:!0}),o.FromJdnConverter=o.ToJdnConverter=void 0;const t=d();o.ToJdnConverter=class{constructor(t,e,a){this.day=t,this.month=e,this.year=a,this.set(t,e,a)}set(e,a,n){if(!new t.DateValidator(e,a,n).isValid())throw new Error("Invalid Ethiopian date");this.day=e,this.month=a,this.year=n,this.jdn=this.process(e,a,n)}process(t,e,a){return 1724221+365*(a-1)+Math.floor(a/4)+30*e+t-31}getJdn(){return this.jdn}getDay(){return this.day}getMonth(){return this.month}getYear(){return this.year}};return o.FromJdnConverter=class{constructor(t){this.jdn=t,this.day=0,this.month=0,this.year=0,this.set(t)}set(t){if(!this.isValidInteger(t))throw new Error("Invalid JDN");this.jdn=t;const e=this.process(t);this.day=e.day,this.month=e.month,this.year=e.year}process(t){const e=(t-1723856)%1461,a=e%365+365*Math.floor(e/1460),n=4*Math.floor((t-1723856)/1461)+Math.floor(e/365)-Math.floor(e/1460);return{day:a%30+1,month:Math.floor(a/30)+1,year:n}}isValidInteger(...t){return t.every(t=>Number.isInteger(t)&&t>=0)}getJdn(){return this.jdn}getDay(){return this.day}getMonth(){return this.month}getYear(){return this.year}},o}function c(){if(n)return s;n=1,Object.defineProperty(s,"__esModule",{value:!0}),s.DateTime=void 0;const t=l(),e=d();class a{constructor(t){this.gregorianTime=new Date(t),this.year=0,this.month=0,this.day=0,this.leapYear=!1,this.dayOfYear=0,this.daysInMonth=0,this.updateComputedFields()}static now(){return new a(new Date)}static of(e,n,r,i=0,s=0,o=0,h=0){const d=new t.ToJdnConverter(r,n,e).getJdn(),l=a.jdnToGregorian(d),c=new Date(l.year,l.month-1,l.day,i,s,o,h);return new a(c)}static fromTimestamp(t){return new a(new Date(1e3*t))}static fromConverter(t){return a.of(t.getYear(),t.getMonth(),t.getDay())}updateComputedFields(){const n=a.gregorianToJdn(this.gregorianTime.getFullYear(),this.gregorianTime.getMonth()+1,this.gregorianTime.getDate()),r=new t.FromJdnConverter(n);this.year=r.getYear(),this.month=r.getMonth(),this.day=r.getDay(),this.leapYear=new e.LeapYearValidator(this.year).isValid(),this.dayOfYear=30*(this.month-1)+this.day,13===this.month?this.daysInMonth=this.leapYear?6:5:this.daysInMonth=30}static jdnToGregorian(t){const e=t+32044,a=Math.floor((4*e+3)/146097),n=e-Math.floor(146097*a/4),r=Math.floor((4*n+3)/1461),i=n-Math.floor(1461*r/4),s=Math.floor((5*i+2)/153),o=i-Math.floor((153*s+2)/5)+1,h=s+3-12*Math.floor(s/10);return{year:100*a+r-4800+Math.floor(s/10),month:h,day:o}}static gregorianToJdn(t,e,a){const n=Math.floor((14-e)/12),r=t+4800-n,i=e+12*n-3;return a+Math.floor((153*i+2)/5)+365*r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400)-32045}getYear(){return this.year}getMonth(){return this.month}getDay(){return this.day}isLeapYear(){return this.leapYear}getDayOfYear(){return this.dayOfYear}getDaysInMonth(){return this.daysInMonth}getHour(){return this.gregorianTime.getHours()}getMinute(){return this.gregorianTime.getMinutes()}getSecond(){return this.gregorianTime.getSeconds()}getMillisecond(){return this.gregorianTime.getMilliseconds()}getDayOfWeek(){const t=this.gregorianTime.getDay();return 0===t?7:t}getTimestamp(){return Math.floor(this.gregorianTime.getTime()/1e3)}toGregorian(){return new Date(this.gregorianTime)}add(t){const e=new Date(this.gregorianTime.getTime()+t);return new a(e)}sub(t){const e=new Date(this.gregorianTime.getTime()-t);return new a(e)}addDate(t,e,n){const r=new Date(this.gregorianTime);return r.setFullYear(r.getFullYear()+t),r.setMonth(r.getMonth()+e),r.setDate(r.getDate()+n),new a(r)}diff(t){return this.gregorianTime.getTime()-t.gregorianTime.getTime()}}return s.DateTime=a,s}var u,p,g={};function m(){return u||(u=1,Object.defineProperty(g,"__esModule",{value:!0}),g.DATE_GEEZ_ORTHODOX=g.DATE_GEEZ=g.DATE_ETHIOPIAN_ORTHODOX=g.DATE_ETHIOPIAN=g.ERA_BC=g.ERA_AM=g.TIME_OF_DAY_NAMES=g.GEEZ_NUMBERS=g.ORTHODOX_YEAR_NAMES=g.ORTHODOX_DAY_NAMES=g.DAY_NAMES_LONG=g.DAY_NAMES=g.MONTH_NAMES=void 0,g.MONTH_NAMES=["","መስከረም","ጥቅምት","ኅዳር","ታኅሣሥ","ጥር","የካቲት","መጋቢት","ሚያዝያ","ግንቦት","ሰኔ","ሐምሌ","ነሐሴ","ጳጉሜን"],g.DAY_NAMES=["","ሰኞ","ማክሰኞ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ","እሑድ"],g.DAY_NAMES_LONG=["","ሰኞ","ማክሰኞ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ","እሑድ"],g.ORTHODOX_DAY_NAMES=["","ልደታ","ታደዎስ","ቅዱስ","ሩፋኤል","አቡነ","ቅዱሳን","ሥላሴ","እግዝእትነ","ቅዱስ","ገብርኤል","ዮሐንስ","ሚካኤል","እየሱስ","አማኑኤል","ቂርቆስ","እግዚአብሔር","እስጢፋኖስ","መድኃኔዓለም","ደብረዘይት","ሕንፅተ","መስቀል","ሩፋኤል","ድንግል","ሚካኤል","አቡነ","እግዚአብሔር","መድኃኔዓለም","ጊዮርጊስ","በዓለ","ምህረት"],g.ORTHODOX_YEAR_NAMES=["ዮሐንስ","ማቴዎስ","ማርቆስ","ሉቃስ"],g.GEEZ_NUMBERS=["","፩","፪","፫","፬","፭","፮","፯","፰","፱","፲","፲፩","፲፪","፲፫","፲፬","፲፭","፲፮","፲፯","፲፰","፲፱","፳","፳፩","፳፪","፳፫","፳፬","፳፭","፳፮","፳፯","፳፰","፳፱","፴"],g.TIME_OF_DAY_NAMES={midnight:"እኩለ፡ሌሊት",morning:"ጡዋት",noon:"ቀትር",afternoon:"ከሰዓት",evening:"ምሽት",night:"ሌሊት"},g.ERA_AM="ዓ/ም",g.ERA_BC="ዓ/ዓ",g.DATE_ETHIOPIAN="l፣ F d ቀን H:i:s A T Y E",g.DATE_ETHIOPIAN_ORTHODOX="l፣ F d ቀን (x) H:i:s A T Y (X) E",g.DATE_GEEZ="l፣ F V ቀን H:i:s A T K E",g.DATE_GEEZ_ORTHODOX="l፣ F V ቀን (x) H:i:s A T K (X) E"),g}function y(){if(p)return i;p=1,Object.defineProperty(i,"__esModule",{value:!0}),i.DateTimeFormatter=void 0,i.extendDateTime=r;const t=c(),e=m();class a{constructor(t){this.dt=t}format(t){let a=t;const n={x:this.getOrthodoxDayName(),X:this.getOrthodoxYearName(),E:e.ERA_AM,K:this.getYearInGeez(),V:this.getDayInGeez(),F:this.getMonthName(),l:this.getDayName(),Y:this.dt.getYear().toString(),m:this.dt.getMonth().toString().padStart(2,"0"),d:this.dt.getDay().toString().padStart(2,"0"),H:this.dt.getHour().toString().padStart(2,"0"),i:this.dt.getMinute().toString().padStart(2,"0"),s:this.dt.getSecond().toString().padStart(2,"0"),A:this.getTimeOfDay(),T:this.getTimezone()};for(const t in n){const e=`{{${t}}}`;a=a.split(t).join(e)}for(const t in n){const e=`{{${t}}}`;a=a.split(e).join(n[t])}return a}getMonthName(){const t=this.dt.getMonth();return t>=1&&t<=13?e.MONTH_NAMES[t]:""}getDayName(){const t=this.dt.getDayOfWeek();return t>=1&&t<=7?e.DAY_NAMES[t]:""}getOrthodoxDayName(){const t=this.dt.getDay();return t>=1&&t<=30?e.ORTHODOX_DAY_NAMES[t]:""}getOrthodoxYearName(){const t=(this.dt.getYear()-1)%4;return t>=0&&t<e.ORTHODOX_YEAR_NAMES.length?e.ORTHODOX_YEAR_NAMES[t]:""}getYearInGeez(){return n(this.dt.getYear())}getDayInGeez(){const t=this.dt.getDay();return t>=1&&t<=30?e.GEEZ_NUMBERS[t]:n(t)}getTimeOfDay(){const t=this.dt.getHour();return 0===t?e.TIME_OF_DAY_NAMES.midnight:t<6?e.TIME_OF_DAY_NAMES.night:t<12?e.TIME_OF_DAY_NAMES.morning:12===t?e.TIME_OF_DAY_NAMES.noon:t<17?e.TIME_OF_DAY_NAMES.afternoon:t<20?e.TIME_OF_DAY_NAMES.evening:e.TIME_OF_DAY_NAMES.night}getTimezone(){const t=-this.dt.toGregorian().getTimezoneOffset(),e=t>=0?"+":"-",a=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60;return`GMT${e}${a.toString().padStart(2,"0")}${n.toString().padStart(2,"0")}`}formatRFC3339(){return this.dt.toGregorian().toISOString()}formatISO8601(){return this.dt.toGregorian().toISOString()}toString(){return`${this.getMonthName()} ${this.dt.getDay()}, ${this.dt.getYear()} ${this.dt.getHour().toString().padStart(2,"0")}:${this.dt.getMinute().toString().padStart(2,"0")}:${this.dt.getSecond().toString().padStart(2,"0")}`}}function n(t){if(t>=1&&t<e.GEEZ_NUMBERS.length)return e.GEEZ_NUMBERS[t];const a=[" ","፩","፪","፫","፬","፭","፮","፯","፰","፱"],r=[" ","፲","፳","፴","፵","፶","፷","፸","፹","፺"];let i="",s=t;if(s>=1e3){const t=Math.floor(s/1e3);i+=1===t?"፲፻":t<10?a[t]+"፲፻":n(t)+"፻",s%=1e3}if(s>=100){const t=Math.floor(s/100);1===t?i+="፻":t<10&&(i+=a[t]+"፻"),s%=100}if(s>=10){const t=Math.floor(s/10);t<r.length&&(i+=r[t]),s%=10}return s>0&&s<a.length&&(i+=a[s]),i}function r(){t.DateTime.prototype.format=function(t){return new a(this).format(t)},t.DateTime.prototype.formatRFC3339=function(){return new a(this).formatRFC3339()},t.DateTime.prototype.formatISO8601=function(){return new a(this).formatISO8601()},t.DateTime.prototype.toString=function(){return new a(this).toString()}}return i.DateTimeFormatter=a,r(),i}var E,D,M={};var v=(D||(D=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DATE_GEEZ_ORTHODOX=t.DATE_GEEZ=t.DATE_ETHIOPIAN_ORTHODOX=t.DATE_ETHIOPIAN=t.ERA_BC=t.ERA_AM=t.TIME_OF_DAY_NAMES=t.GEEZ_NUMBERS=t.ORTHODOX_YEAR_NAMES=t.ORTHODOX_DAY_NAMES=t.DAY_NAMES_LONG=t.DAY_NAMES=t.MONTH_NAMES=t.Easter=t.FromJdnConverter=t.ToJdnConverter=t.LeapYearValidator=t.DateValidator=t.DateTimeFormatter=t.DateTime=void 0,y();var e=c();Object.defineProperty(t,"DateTime",{enumerable:!0,get:function(){return e.DateTime}});var a=y();Object.defineProperty(t,"DateTimeFormatter",{enumerable:!0,get:function(){return a.DateTimeFormatter}});var n=d();Object.defineProperty(t,"DateValidator",{enumerable:!0,get:function(){return n.DateValidator}}),Object.defineProperty(t,"LeapYearValidator",{enumerable:!0,get:function(){return n.LeapYearValidator}});var r=l();Object.defineProperty(t,"ToJdnConverter",{enumerable:!0,get:function(){return r.ToJdnConverter}}),Object.defineProperty(t,"FromJdnConverter",{enumerable:!0,get:function(){return r.FromJdnConverter}});var i=function(){if(E)return M;E=1,Object.defineProperty(M,"__esModule",{value:!0}),M.Easter=void 0;const t=c();return M.Easter=class{get(e){let a=8,n=(e%19*19+15)%30;0===n&&(n=30,a=7);let r=t.DateTime.of(e,a,n);const i=r.getDayOfWeek();if(7!==i){const t=(7-i)%7;r=r.addDate(0,0,t)}return r}getGregorian(t){return this.get(t).toGregorian()}},M}();Object.defineProperty(t,"Easter",{enumerable:!0,get:function(){return i.Easter}});var s=m();Object.defineProperty(t,"MONTH_NAMES",{enumerable:!0,get:function(){return s.MONTH_NAMES}}),Object.defineProperty(t,"DAY_NAMES",{enumerable:!0,get:function(){return s.DAY_NAMES}}),Object.defineProperty(t,"DAY_NAMES_LONG",{enumerable:!0,get:function(){return s.DAY_NAMES_LONG}}),Object.defineProperty(t,"ORTHODOX_DAY_NAMES",{enumerable:!0,get:function(){return s.ORTHODOX_DAY_NAMES}}),Object.defineProperty(t,"ORTHODOX_YEAR_NAMES",{enumerable:!0,get:function(){return s.ORTHODOX_YEAR_NAMES}}),Object.defineProperty(t,"GEEZ_NUMBERS",{enumerable:!0,get:function(){return s.GEEZ_NUMBERS}}),Object.defineProperty(t,"TIME_OF_DAY_NAMES",{enumerable:!0,get:function(){return s.TIME_OF_DAY_NAMES}}),Object.defineProperty(t,"ERA_AM",{enumerable:!0,get:function(){return s.ERA_AM}}),Object.defineProperty(t,"ERA_BC",{enumerable:!0,get:function(){return s.ERA_BC}}),Object.defineProperty(t,"DATE_ETHIOPIAN",{enumerable:!0,get:function(){return s.DATE_ETHIOPIAN}}),Object.defineProperty(t,"DATE_ETHIOPIAN_ORTHODOX",{enumerable:!0,get:function(){return s.DATE_ETHIOPIAN_ORTHODOX}}),Object.defineProperty(t,"DATE_GEEZ",{enumerable:!0,get:function(){return s.DATE_GEEZ}}),Object.defineProperty(t,"DATE_GEEZ_ORTHODOX",{enumerable:!0,get:function(){return s.DATE_GEEZ_ORTHODOX}})}(r)),r);class A{constructor(){this.monthNames=["Meskerem","Tikimt","Hidar","Tahsas","Tir","Yekatit","Megabit","Miazia","Ginbot","Sene","Hamle","Nehase","Pagume"],this.dayNames=["Ehud","Segno","Maksegno","Erob","Hamus","Arb","Kidame"],this.dayNamesAmharic=[v.DAY_NAMES_LONG[7],v.DAY_NAMES_LONG[1],v.DAY_NAMES_LONG[2],v.DAY_NAMES_LONG[3],v.DAY_NAMES_LONG[4],v.DAY_NAMES_LONG[5],v.DAY_NAMES_LONG[6]]}toEthiopian(t){const e=new v.DateTime(t);return{year:e.getYear(),month:e.getMonth(),day:e.getDay()}}toGregorian(t,e,a){return v.DateTime.of(t,e,a).toGregorian()}getDaysInMonth(t,e){return e<13?30:this.isLeapYear(t)?6:5}isLeapYear(t){return(t+1)%4==0}getDayOfWeek(t,e,a){return this.toGregorian(t,e,a).getDay()}getMonthName(t,e=!1){return e?v.MONTH_NAMES[t]||"":this.monthNames[t-1]||""}getDayName(t,e=!1){return(e?this.dayNamesAmharic:this.dayNames)[t]||""}toEthiopicNumeral(t){if(0===t)return"0";if(t>=1&&t<=30)return v.GEEZ_NUMBERS[t];const e={1:"፩",2:"፪",3:"፫",4:"፬",5:"፭",6:"፮",7:"፯",8:"፰",9:"፱",10:"፲",20:"፳",30:"፴",40:"፵",50:"፶",60:"፷",70:"፸",80:"፹",90:"፺",100:"፻",1e4:"፼"};if(e[t])return e[t];let a="",n=t;if(n<100){const t=10*Math.floor(n/10),r=n%10;return t>0&&(a+=e[t]),r>0&&(a+=e[r]),a}return t.toString().split("").map(t=>e[parseInt(t)]||t).join("")}now(){return this.toEthiopian(new Date)}}t.EthiopianCalendar=A,t.EthiopianCalendarUI=class{constructor(t={}){this.calendar=new A,this.options={onSelect:t.onSelect||null,inputElement:t.inputElement||null,initialDate:t.initialDate||new Date,showGregorian:void 0===t.showGregorian||t.showGregorian,useAmharic:void 0===t.useAmharic||t.useAmharic,useEthiopicNumbers:void 0!==t.useEthiopicNumbers&&t.useEthiopicNumbers,mergedView:void 0!==t.mergedView&&t.mergedView,primaryCalendar:t.primaryCalendar||"ethiopian",...t},this.currentEthDate=this.calendar.toEthiopian(this.options.initialDate),this.selectedDate=null,this.popup=null,this.justOpened=!1}show(){if(this.popup)return this.popup.style.display="block",this.justOpened=!0,void setTimeout(()=>{this.justOpened=!1},10);this.popup=this.createPopup(),document.body.appendChild(this.popup),this.positionPopup(),this.render(),this.attachEventListeners(),this.justOpened=!0,setTimeout(()=>{this.justOpened=!1},10)}hide(){this.popup&&(this.popup.style.display="none")}destroy(){this.popup&&(this.popup.remove(),this.popup=null)}createPopup(){const t=document.createElement("div");t.className="ethcal-popup";const e=this.options.useAmharic?"<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>":"<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>";if(this.options.mergedView){const a="ethiopian"===this.options.primaryCalendar,n=a?"&lt;አ":"&lt;Y",r=a?"&lt;ወ":"&lt;M",i=a?"ወ&gt;":"M&gt;",s=a?"አ&gt;":"Y&gt;";t.innerHTML=`\n        <div class="ethcal-calendars ethcal-merged">\n          <div class="ethcal-calendar ethcal-merged-calendar">\n            <div class="ethcal-header">\n              <button class="ethcal-prev-year" aria-label="Previous Year">${n}</button>\n              <button class="ethcal-prev-month" aria-label="Previous Month">${r}</button>\n              <div class="ethcal-current">\n                <div class="ethcal-primary-header">\n                  <span class="ethcal-month-name"></span>\n                  <span class="ethcal-year"></span>\n                </div>\n                <div class="ethcal-secondary-header">\n                  <span class="ethcal-secondary-month-name"></span>\n                  <span class="ethcal-secondary-year"></span>\n                </div>\n              </div>\n              <button class="ethcal-next-month" aria-label="Next Month">${i}</button>\n              <button class="ethcal-next-year" aria-label="Next Year">${s}</button>\n            </div>\n            <div class="ethcal-weekdays">${e}</div>\n            <div class="ethcal-days ethcal-merged-days"></div>\n          </div>\n        </div>\n        <div class="ethcal-footer">\n          <button class="ethcal-today">Today</button>\n        </div>\n      `}else t.innerHTML=`\n        <div class="ethcal-calendars">\n          <div class="ethcal-calendar ethcal-ethiopian">\n            <div class="ethcal-header">\n              <button class="ethcal-prev-year" aria-label="Previous Year">&lt;አ</button>\n              <button class="ethcal-prev-month" aria-label="Previous Month">&lt;ወ</button>\n              <div class="ethcal-current">\n                <span class="ethcal-month-name"></span>\n                <span class="ethcal-year"></span>\n              </div>\n              <button class="ethcal-next-month" aria-label="Next Month">ወ&gt;</button>\n              <button class="ethcal-next-year" aria-label="Next Year">አ&gt;</button>\n            </div>\n            <div class="ethcal-weekdays">${e}</div>\n            <div class="ethcal-days"></div>\n          </div>\n          ${this.options.showGregorian?'\n          <div class="ethcal-calendar ethcal-gregorian">\n            <div class="ethcal-header">\n              <button class="ethcal-greg-prev-year" aria-label="Previous Year">&lt;Y</button>\n              <button class="ethcal-greg-prev-month" aria-label="Previous Month">&lt;M</button>\n              <div class="ethcal-current">\n                <span class="ethcal-greg-month-name"></span>\n                <span class="ethcal-greg-year"></span>\n              </div>\n              <button class="ethcal-greg-next-month" aria-label="Next Month">M&gt;</button>\n              <button class="ethcal-greg-next-year" aria-label="Next Year">Y&gt;</button>\n            </div>\n            <div class="ethcal-weekdays">\n              <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>\n            </div>\n            <div class="ethcal-greg-days"></div>\n          </div>\n          ':""}\n        </div>\n        <div class="ethcal-footer">\n          <button class="ethcal-today">Today</button>\n        </div>\n      `;return t}positionPopup(){if(this.options.inputElement){const t=this.options.inputElement.getBoundingClientRect();this.popup.style.position="absolute",this.popup.style.top=t.bottom+window.scrollY+5+"px",this.popup.style.left=t.left+window.scrollX+"px"}else this.popup.style.position="fixed",this.popup.style.top="50%",this.popup.style.left="50%",this.popup.style.transform="translate(-50%, -50%)"}render(){const{year:t,month:e}=this.currentEthDate;if(this.options.mergedView){const a="ethiopian"===this.options.primaryCalendar,n=a?"<አ":"<Y",r=a?"<ወ":"<M",i=a?"ወ>":"M>",s=a?"አ>":"Y>";this.popup.querySelector(".ethcal-prev-year").textContent=n,this.popup.querySelector(".ethcal-prev-month").textContent=r,this.popup.querySelector(".ethcal-next-month").textContent=i,this.popup.querySelector(".ethcal-next-year").textContent=s;const o=["January","February","March","April","May","June","July","August","September","October","November","December"];if(a){const a=this.calendar.getMonthName(e,!0),n=t;this.popup.querySelector(".ethcal-month-name").textContent=a,this.popup.querySelector(".ethcal-year").textContent=n;const r=this.getSecondaryMonthRange(t,e,!0);let i="";if(r.isSameMonth)i=`${o[r.startMonth]} ${r.startYear}`;else{const t=o[r.startMonth],e=o[r.endMonth];i=r.startYear===r.endYear?`${t} - ${e} ${r.startYear}`:`${t} ${r.startYear} - ${e} ${r.endYear}`}this.popup.querySelector(".ethcal-secondary-month-name").textContent=i,this.popup.querySelector(".ethcal-secondary-year").textContent=""}else{const a=this.calendar.toGregorian(t,e,1),n=a.getFullYear(),r=a.getMonth();this.popup.querySelector(".ethcal-month-name").textContent=o[r],this.popup.querySelector(".ethcal-year").textContent=n;const i=this.getSecondaryMonthRange(n,r,!1);let s="";if(i.isSameMonth){s=`${this.calendar.getMonthName(i.startMonth,!0)} ${i.startYear}`}else{const t=this.calendar.getMonthName(i.startMonth,!0),e=this.calendar.getMonthName(i.endMonth,!0);s=i.startYear===i.endYear?`${t} - ${e} ${i.startYear}`:`${t} ${i.startYear} - ${e} ${i.endYear}`}this.popup.querySelector(".ethcal-secondary-month-name").textContent=s,this.popup.querySelector(".ethcal-secondary-year").textContent=""}const h=this.popup.querySelector(".ethcal-calendar-title");h&&(h.textContent=(a?"Ethiopian":"Gregorian")+" Calendar (Primary)")}else this.popup.querySelector(".ethcal-month-name").textContent=this.calendar.getMonthName(e,this.options.useAmharic),this.popup.querySelector(".ethcal-year").textContent=t;this.updateWeekdayNames(),this.options.mergedView?this.renderMergedCalendar():(this.renderDays(),this.options.showGregorian&&this.renderGregorianCalendar())}updateWeekdayNames(){const t=this.options.mergedView?".ethcal-merged-calendar .ethcal-weekdays":".ethcal-ethiopian .ethcal-weekdays",e=this.popup.querySelector(t);if(e){const t=this.options.mergedView?"ethiopian"===this.options.primaryCalendar:this.options.useAmharic;e.innerHTML=t?"<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>":"<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>"}}renderDays(){const{year:t,month:e}=this.currentEthDate,a=this.popup.querySelector(".ethcal-days");a.innerHTML="";const n=this.calendar.getDaysInMonth(t,e),r=this.calendar.getDayOfWeek(t,e,1);for(let t=0;t<r;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",a.appendChild(t)}for(let r=1;r<=n;r++){const n=document.createElement("div");n.className="ethcal-day";const i=this.options.useEthiopicNumbers?this.calendar.toEthiopicNumeral(r):r;n.textContent=i,n.dataset.day=r,n.dataset.month=e,n.dataset.year=t;const s=this.calendar.now();t===s.year&&e===s.month&&r===s.day&&n.classList.add("ethcal-today-highlight"),this.selectedDate&&t===this.selectedDate.year&&e===this.selectedDate.month&&r===this.selectedDate.day&&n.classList.add("ethcal-selected"),a.appendChild(n)}}renderGregorianCalendar(){const{year:t,month:e}=this.currentEthDate,a=this.selectedDate&&this.selectedDate.year===t&&this.selectedDate.month===e?this.selectedDate.day:this.currentEthDate.day||15,n=this.calendar.toGregorian(t,e,a),r=n.getFullYear(),i=n.getMonth();this.popup.querySelector(".ethcal-greg-month-name").textContent=["January","February","March","April","May","June","July","August","September","October","November","December"][i],this.popup.querySelector(".ethcal-greg-year").textContent=r;const s=this.popup.querySelector(".ethcal-greg-days");s.innerHTML="";const o=new Date(r,i,1).getDay(),h=new Date(r,i+1,0).getDate();for(let t=0;t<o;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",s.appendChild(t)}const d=new Date;for(let t=1;t<=h;t++){const e=document.createElement("div");if(e.className="ethcal-day ethcal-greg-day",e.textContent=t,e.dataset.day=t,e.dataset.month=i,e.dataset.year=r,r===d.getFullYear()&&i===d.getMonth()&&t===d.getDate()&&e.classList.add("ethcal-today-highlight"),this.selectedDate){const a=this.calendar.toGregorian(this.selectedDate.year,this.selectedDate.month,this.selectedDate.day);r===a.getFullYear()&&i===a.getMonth()&&t===a.getDate()&&e.classList.add("ethcal-selected")}s.appendChild(e)}}getSecondaryMonthRange(t,e,a){if(a){const a=this.calendar.toGregorian(t,e,1),n=this.calendar.getDaysInMonth(t,e),r=this.calendar.toGregorian(t,e,n),i=a.getMonth(),s=a.getFullYear(),o=r.getMonth(),h=r.getFullYear();return{startMonth:i,startYear:s,endMonth:o,endYear:h,isSameMonth:i===o&&s===h}}{const a=new Date(t,e,1),n=new Date(t,e+1,0),r=this.calendar.toEthiopian(a),i=this.calendar.toEthiopian(n);return{startMonth:r.month,startYear:r.year,endMonth:i.month,endYear:i.year,isSameMonth:r.month===i.month&&r.year===i.year}}}renderMergedCalendar(){const{year:t,month:e}=this.currentEthDate,a="ethiopian"===this.options.primaryCalendar,n=this.popup.querySelector(".ethcal-merged-days");if(n.innerHTML="",a){const a=this.calendar.getDaysInMonth(t,e),r=this.calendar.getDayOfWeek(t,e,1);for(let t=0;t<r;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",n.appendChild(t)}const i=this.calendar.now();for(let r=1;r<=a;r++){const a=document.createElement("div");a.className="ethcal-day ethcal-merged-day";const s=this.options.useEthiopicNumbers?this.calendar.toEthiopicNumeral(r):r,o=this.calendar.toGregorian(t,e,r),h=o.getDate();a.innerHTML=`\n          <span class="ethcal-primary-date">${s}</span>\n          <span class="ethcal-secondary-date">${h}</span>\n        `,a.dataset.day=r,a.dataset.month=e,a.dataset.year=t,a.dataset.gregDay=o.getDate(),a.dataset.gregMonth=o.getMonth(),a.dataset.gregYear=o.getFullYear(),t===i.year&&e===i.month&&r===i.day&&a.classList.add("ethcal-today-highlight"),this.selectedDate&&t===this.selectedDate.year&&e===this.selectedDate.month&&r===this.selectedDate.day&&a.classList.add("ethcal-selected"),n.appendChild(a)}}else{const a=this.calendar.toGregorian(t,e,1),r=a.getFullYear(),i=a.getMonth(),s=new Date(r,i,1).getDay(),o=new Date(r,i+1,0).getDate();for(let t=0;t<s;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",n.appendChild(t)}const h=new Date;for(let t=1;t<=o;t++){const e=document.createElement("div");e.className="ethcal-day ethcal-merged-day";const a=t,s=new Date(r,i,t),o=this.calendar.toEthiopian(s),d=this.options.useEthiopicNumbers?this.calendar.toEthiopicNumeral(o.day):o.day;if(e.innerHTML=`\n          <span class="ethcal-primary-date">${a}</span>\n          <span class="ethcal-secondary-date">${d}</span>\n        `,e.dataset.day=o.day,e.dataset.month=o.month,e.dataset.year=o.year,e.dataset.gregDay=t,e.dataset.gregMonth=i,e.dataset.gregYear=r,r===h.getFullYear()&&i===h.getMonth()&&t===h.getDate()&&e.classList.add("ethcal-today-highlight"),this.selectedDate){const a=this.calendar.toGregorian(this.selectedDate.year,this.selectedDate.month,this.selectedDate.day);r===a.getFullYear()&&i===a.getMonth()&&t===a.getDate()&&e.classList.add("ethcal-selected")}n.appendChild(e)}}}attachEventListeners(){this.popup.querySelector(".ethcal-prev-year").addEventListener("click",()=>{this.currentEthDate.year--,this.render()}),this.popup.querySelector(".ethcal-next-year").addEventListener("click",()=>{this.currentEthDate.year++,this.render()}),this.popup.querySelector(".ethcal-prev-month").addEventListener("click",()=>{this.currentEthDate.month--,this.currentEthDate.month<1&&(this.currentEthDate.month=13,this.currentEthDate.year--),this.render()}),this.popup.querySelector(".ethcal-next-month").addEventListener("click",()=>{this.currentEthDate.month++,this.currentEthDate.month>13&&(this.currentEthDate.month=1,this.currentEthDate.year++),this.render()}),this.options.showGregorian&&!this.options.mergedView&&(this.popup.querySelector(".ethcal-greg-prev-year").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setFullYear(t.getFullYear()-1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-next-year").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setFullYear(t.getFullYear()+1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-prev-month").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setMonth(t.getMonth()-1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-next-month").addEventListener("click",()=>{const t=this.calendar.toGregorian(this.currentEthDate.year,this.currentEthDate.month,15);t.setMonth(t.getMonth()+1),this.currentEthDate=this.calendar.toEthiopian(t),this.render()}),this.popup.querySelector(".ethcal-greg-days").addEventListener("click",t=>{if(t.target.classList.contains("ethcal-greg-day")){const e=parseInt(t.target.dataset.day),a=parseInt(t.target.dataset.month),n=parseInt(t.target.dataset.year),r=new Date(n,a,e),i=this.calendar.toEthiopian(r);this.selectedDate=i,this.currentEthDate=i,this.render(),this.options.onSelect&&this.options.onSelect({ethiopian:i,gregorian:r}),this.options.inputElement&&(this.options.inputElement.value=`${i.day}/${i.month}/${i.year}`),this.hide()}}));const t=this.options.mergedView?".ethcal-merged-days":".ethcal-days";this.popup.querySelector(t).addEventListener("click",t=>{if(t.target.closest(".ethcal-day")&&!t.target.closest(".ethcal-empty")){const e=t.target.closest(".ethcal-day"),a=parseInt(e.dataset.day),n=parseInt(e.dataset.month),r=parseInt(e.dataset.year);if(this.selectedDate={year:r,month:n,day:a},this.render(),this.options.onSelect){const t=this.calendar.toGregorian(r,n,a);this.options.onSelect({ethiopian:{year:r,month:n,day:a},gregorian:t})}this.options.inputElement&&(this.options.inputElement.value=`${a}/${n}/${r}`),this.hide()}}),this.popup.querySelector(".ethcal-today").addEventListener("click",()=>{this.currentEthDate=this.calendar.now(),this.render()}),setTimeout(()=>{document.addEventListener("click",t=>{!this.popup||this.popup.contains(t.target)||t.target===this.options.inputElement||this.justOpened||this.hide()})},0)}setDate(t){this.currentEthDate=this.calendar.toEthiopian(t),this.popup&&this.render()}getSelectedDate(){return this.selectedDate}}});
//# sourceMappingURL=ethcal-ui.umd.js.map
