{"version":3,"file":"ethcal-ui.esm.js","sources":["../src/calendar.js","../src/ui.js"],"sourcesContent":["/**\n * Ethiopian Calendar Utility\n * Converts between Gregorian and Ethiopian calendars\n * Ethiopian calendar has 13 months (12 months of 30 days + 1 month of 5/6 days)\n */\n\nclass EthiopianCalendar {\n  constructor() {\n    this.monthNames = [\n      'Meskerem', 'Tikimt', 'Hidar', 'Tahsas', 'Tir', 'Yekatit',\n      'Megabit', 'Miazia', 'Ginbot', 'Sene', 'Hamle', 'Nehase', 'Pagume'\n    ];\n\n    this.monthNamesAmharic = [\n      'መስከረም', 'ጥቅምት', 'ኅዳር', 'ታኅሣሥ', 'ጥር', 'የካቲት',\n      'መጋቢት', 'ሚያዝያ', 'ግንቦት', 'ሰኔ', 'ሐምሌ', 'ነሐሴ', 'ጳጉሜን'\n    ];\n    \n    this.dayNames = ['Ehud', 'Segno', 'Maksegno', 'Erob', 'Hamus', 'Arb', 'Kidame'];\n\n    this.dayNamesAmharic = ['እሁድ', 'ሰኞ', 'ማክሰኞ', 'ረቡዕ', 'ሐሙስ', 'ዓርብ', 'ቅዳሜ'];\n  }\n\n  /**\n   * Helper function to calculate Ethiopian new year day\n   * @param {number} year - Ethiopian year\n   * @returns {number} New year day\n   * @private\n   */\n  _startDayOfEthiopian(year) {\n    const newYearDay = Math.floor(year / 100) - Math.floor(year / 400) - 4;\n    // if the prev ethiopian year is a leap year, new-year occurs on 12th\n    return ((year - 1) % 4 === 3) ? newYearDay + 1 : newYearDay;\n  }\n\n  /**\n   * Convert Gregorian date to Ethiopian date\n   * @param {Date} gregorianDate - Gregorian date object\n   * @returns {Object} Ethiopian date {year, month, day}\n   */\n  toEthiopian(gregorianDate) {\n    const year = gregorianDate.getFullYear();\n    const month = gregorianDate.getMonth() + 1;\n    const date = gregorianDate.getDate();\n    \n    // Validate input\n    if (month === 10 && date >= 5 && date <= 14 && year === 1582) {\n      throw new Error('Invalid Date between 5-14 May 1582.');\n    }\n    \n    // Number of days in gregorian months starting with January (index 1)\n    const gregorianMonths = [0.0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    \n    // Number of days in ethiopian months starting with January (index 1)\n    const ethiopianMonths = [0.0, 30, 30, 30, 30, 30, 30, 30, 30, 30, 5, 30, 30, 30, 30];\n    \n    // if gregorian leap year, February has 29 days\n    if ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0) {\n      gregorianMonths[2] = 29;\n    }\n    \n    // September sees 8y difference\n    let ethiopianYear = year - 8;\n    \n    // if ethiopian leap year pagumain has 6 days\n    if (ethiopianYear % 4 === 3) {\n      ethiopianMonths[10] = 6;\n    }\n    \n    // Ethiopian new year in Gregorian calendar\n    const newYearDay = this._startDayOfEthiopian(year - 8);\n    \n    // calculate number of days up to that date\n    let until = 0;\n    for (let i = 1; i < month; i++) {\n      until += gregorianMonths[i];\n    }\n    until += date;\n    \n    // update tahissas (december) to match january 1st\n    let tahissas = (ethiopianYear % 4) === 0 ? 26 : 25;\n    \n    // take into account the 1582 change\n    if (year < 1582) {\n      ethiopianMonths[1] = 0;\n      ethiopianMonths[2] = tahissas;\n    } else if (until <= 277 && year === 1582) {\n      ethiopianMonths[1] = 0;\n      ethiopianMonths[2] = tahissas;\n    } else {\n      tahissas = newYearDay - 3;\n      ethiopianMonths[1] = tahissas;\n    }\n    \n    // calculate month and date incremently\n    let m;\n    let ethiopianDate;\n    for (m = 1; m < ethiopianMonths.length; m++) {\n      if (until <= ethiopianMonths[m]) {\n        ethiopianDate = (m === 1 || ethiopianMonths[m] === 0) ? until + (30 - tahissas) : until;\n        break;\n      } else {\n        until -= ethiopianMonths[m];\n      }\n    }\n    \n    // if m > 10, we're already on next Ethiopian year\n    if (m > 10) {\n      ethiopianYear += 1;\n    }\n    \n    // Ethiopian months ordered according to Gregorian\n    const order = [0, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 1, 2, 3, 4];\n    const ethiopianMonth = order[m];\n    \n    return {\n      year: ethiopianYear,\n      month: ethiopianMonth,\n      day: ethiopianDate\n    };\n  }\n\n  /**\n   * Convert Ethiopian date to Gregorian date\n   * @param {number} year - Ethiopian year\n   * @param {number} month - Ethiopian month (1-13)\n   * @param {number} day - Ethiopian day\n   * @returns {Date} Gregorian date object\n   */\n  toGregorian(year, month, day) {\n    // Ethiopian new year in Gregorian calendar\n    const newYearDay = this._startDayOfEthiopian(year);\n    \n    // September (Ethiopian) sees 7y difference\n    let gregorianYear = year + 7;\n    \n    // Number of days in gregorian months\n    // starting with September (index 1)\n    // Index 0 is reserved for leap years switches.\n    // Index 4 is December, the final month of the year.\n    let gregorianMonths = [0.0, 30, 31, 30, 31, 31, 28, 31, 30, 31, 30, 31, 31, 30];\n    \n    // if next gregorian year is leap year, February has 29 days.\n    const nextYear = gregorianYear + 1;\n    if ((nextYear % 4 === 0 && nextYear % 100 !== 0) || nextYear % 400 === 0) {\n      gregorianMonths[6] = 29;\n    }\n    \n    // calculate number of days up to that date\n    let until = ((month - 1) * 30.0) + day;\n    if (until <= 37 && year <= 1575) { // mysterious rule\n      until += 28;\n      gregorianMonths[0] = 31;\n    } else {\n      until += newYearDay - 1;\n    }\n    \n    // if ethiopian year is leap year, paguemain has six days\n    if ((year - 1) % 4 === 3) {\n      until += 1;\n    }\n    \n    // calculate month and date incremently\n    let m = 0;\n    let gregorianDate;\n    for (let i = 0; i < gregorianMonths.length; i++) {\n      if (until <= gregorianMonths[i]) {\n        m = i;\n        gregorianDate = until;\n        break;\n      } else {\n        m = i;\n        until -= gregorianMonths[i];\n      }\n    }\n    \n    // if m > 4, we're already on next Gregorian year\n    if (m > 4) {\n      gregorianYear += 1;\n    }\n    \n    // Gregorian months ordered according to Ethiopian\n    const order = [8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n    const gregorianMonth = order[m];\n    \n    return new Date(gregorianYear, gregorianMonth - 1, gregorianDate);\n  }\n\n  /**\n   * Get the number of days in an Ethiopian month\n   * @param {number} year - Ethiopian year\n   * @param {number} month - Ethiopian month (1-13)\n   * @returns {number} Number of days\n   */\n  getDaysInMonth(year, month) {\n    if (month < 13) {\n      return 30;\n    }\n    // Pagume has 5 days in common years, 6 in leap years\n    return this.isLeapYear(year) ? 6 : 5;\n  }\n\n  /**\n   * Check if an Ethiopian year is a leap year\n   * @param {number} year - Ethiopian year\n   * @returns {boolean} True if leap year\n   */\n  isLeapYear(year) {\n    return (year % 4) === 3;\n  }\n\n  /**\n   * Get the day of week for an Ethiopian date\n   * @param {number} year - Ethiopian year\n   * @param {number} month - Ethiopian month\n   * @param {number} day - Ethiopian day\n   * @returns {number} Day of week (0-6, 0 = Sunday)\n   */\n  getDayOfWeek(year, month, day) {\n    const gregDate = this.toGregorian(year, month, day);\n    return gregDate.getDay();\n  }\n\n  /**\n   * Get month name\n   * @param {number} month - Ethiopian month (1-13)\n   * @param {boolean} useAmharic - Use Amharic names\n   * @returns {string} Month name\n   */\n  getMonthName(month, useAmharic = false) {\n    const names = useAmharic ? this.monthNamesAmharic : this.monthNames;\n    return names[month - 1] || '';\n  }\n\n  /**\n   * Get day name\n   * @param {number} dayOfWeek - Day of week (0-6)\n   * @param {boolean} useAmharic - Use Amharic names\n   * @returns {string} Day name\n   */\n  getDayName(dayOfWeek, useAmharic = false) {\n    const names = useAmharic ? this.dayNamesAmharic : this.dayNames;\n    return names[dayOfWeek] || '';\n  }\n\n  /**\n   * Convert Arabic numerals to Ethiopic numerals\n   * @param {number} num - Number to convert\n   * @returns {string} Ethiopic numeral representation\n   */\n  toEthiopicNumeral(num) {\n    if (num === 0) return '0';\n    \n    const ethiopicNumerals = {\n      1: '፩', 2: '፪', 3: '፫', 4: '፬', 5: '፭',\n      6: '፮', 7: '፯', 8: '፰', 9: '፱', 10: '፲',\n      20: '፳', 30: '፴', 40: '፵', 50: '፶',\n      60: '፷', 70: '፸', 80: '፹', 90: '፺',\n      100: '፻', 10000: '፼'\n    };\n\n    if (ethiopicNumerals[num]) {\n      return ethiopicNumerals[num];\n    }\n\n    let result = '';\n    let remaining = num;\n\n    // Handle tens and ones (up to 99)\n    if (remaining < 100) {\n      const tens = Math.floor(remaining / 10) * 10;\n      const ones = remaining % 10;\n      \n      if (tens > 0) result += ethiopicNumerals[tens];\n      if (ones > 0) result += ethiopicNumerals[ones];\n      \n      return result;\n    }\n\n    // For numbers >= 100, use a simpler digit-by-digit approach\n    const digits = num.toString().split('');\n    return digits.map(d => ethiopicNumerals[parseInt(d)] || d).join('');\n  }\n\n  /**\n   * Get current Ethiopian date\n   * @returns {Object} Ethiopian date {year, month, day}\n   */\n  now() {\n    return this.toEthiopian(new Date());\n  }\n}\n\nexport default EthiopianCalendar;\n","import EthiopianCalendar from './calendar.js';\n\n/**\n * Ethiopian Calendar UI Popup Component\n */\nclass EthiopianCalendarUI {\n  constructor(options = {}) {\n    this.calendar = new EthiopianCalendar();\n    this.options = {\n      onSelect: options.onSelect || null,\n      inputElement: options.inputElement || null,\n      initialDate: options.initialDate || new Date(),\n      showGregorian: options.showGregorian !== undefined ? options.showGregorian : true,\n      useAmharic: options.useAmharic !== undefined ? options.useAmharic : true,\n      useEthiopicNumbers: options.useEthiopicNumbers !== undefined ? options.useEthiopicNumbers : false,\n      mergedView: options.mergedView !== undefined ? options.mergedView : false,\n      primaryCalendar: options.primaryCalendar || 'ethiopian', // 'ethiopian' or 'gregorian'\n      ...options\n    };\n    \n    this.currentEthDate = this.calendar.toEthiopian(this.options.initialDate);\n    this.selectedDate = null;\n    this.popup = null;\n  }\n\n  /**\n   * Create and show the calendar popup\n   */\n  show() {\n    if (this.popup) {\n      this.popup.style.display = 'block';\n      return;\n    }\n\n    this.popup = this.createPopup();\n    document.body.appendChild(this.popup);\n    \n    // Position popup\n    this.positionPopup();\n    \n    this.render();\n    this.attachEventListeners();\n  }\n\n  /**\n   * Hide the calendar popup\n   */\n  hide() {\n    if (this.popup) {\n      this.popup.style.display = 'none';\n    }\n  }\n\n  /**\n   * Destroy the popup\n   */\n  destroy() {\n    if (this.popup) {\n      this.popup.remove();\n      this.popup = null;\n    }\n  }\n\n  /**\n   * Create the popup DOM structure\n   */\n  createPopup() {\n    const popup = document.createElement('div');\n    popup.className = 'ethcal-popup';\n    \n    const dayNamesHtml = this.options.useAmharic \n      ? '<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>'\n      : '<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>';\n\n    // Merged view - single calendar showing both dates\n    if (this.options.mergedView) {\n      const isPrimaryEthiopian = this.options.primaryCalendar === 'ethiopian';\n      // Determine button labels based on primary calendar\n      const yearPrevLabel = isPrimaryEthiopian ? '<አ' : '<Y';\n      const monthPrevLabel = isPrimaryEthiopian ? '<ወ' : '<M';\n      const monthNextLabel = isPrimaryEthiopian ? 'ወ>' : 'M>';\n      const yearNextLabel = isPrimaryEthiopian ? 'አ>' : 'Y>';\n      \n      popup.innerHTML = `\n        <div class=\"ethcal-calendars ethcal-merged\">\n          <div class=\"ethcal-calendar ethcal-merged-calendar\">\n            <div class=\"ethcal-header\">\n              <button class=\"ethcal-prev-year\" aria-label=\"Previous Year\">${yearPrevLabel}</button>\n              <button class=\"ethcal-prev-month\" aria-label=\"Previous Month\">${monthPrevLabel}</button>\n              <div class=\"ethcal-current\">\n                <div class=\"ethcal-primary-header\">\n                  <span class=\"ethcal-month-name\"></span>\n                  <span class=\"ethcal-year\"></span>\n                </div>\n                <div class=\"ethcal-secondary-header\">\n                  <span class=\"ethcal-secondary-month-name\"></span>\n                  <span class=\"ethcal-secondary-year\"></span>\n                </div>\n              </div>\n              <button class=\"ethcal-next-month\" aria-label=\"Next Month\">${monthNextLabel}</button>\n              <button class=\"ethcal-next-year\" aria-label=\"Next Year\">${yearNextLabel}</button>\n            </div>\n            <div class=\"ethcal-weekdays\">${dayNamesHtml}</div>\n            <div class=\"ethcal-days ethcal-merged-days\"></div>\n          </div>\n        </div>\n        <div class=\"ethcal-footer\">\n          <button class=\"ethcal-today\">Today</button>\n        </div>\n      `;\n    } else {\n      // Original side-by-side view\n      popup.innerHTML = `\n        <div class=\"ethcal-calendars\">\n          <div class=\"ethcal-calendar ethcal-ethiopian\">\n            <div class=\"ethcal-header\">\n              <button class=\"ethcal-prev-year\" aria-label=\"Previous Year\"><አ</button>\n              <button class=\"ethcal-prev-month\" aria-label=\"Previous Month\"><ወ</button>\n              <div class=\"ethcal-current\">\n                <span class=\"ethcal-month-name\"></span>\n                <span class=\"ethcal-year\"></span>\n              </div>\n              <button class=\"ethcal-next-month\" aria-label=\"Next Month\">ወ></button>\n              <button class=\"ethcal-next-year\" aria-label=\"Next Year\">አ></button>\n            </div>\n            <div class=\"ethcal-weekdays\">${dayNamesHtml}</div>\n            <div class=\"ethcal-days\"></div>\n          </div>\n          ${this.options.showGregorian ? `\n          <div class=\"ethcal-calendar ethcal-gregorian\">\n            <div class=\"ethcal-header\">\n              <button class=\"ethcal-greg-prev-year\" aria-label=\"Previous Year\"><Y</button>\n              <button class=\"ethcal-greg-prev-month\" aria-label=\"Previous Month\"><M</button>\n              <div class=\"ethcal-current\">\n                <span class=\"ethcal-greg-month-name\"></span>\n                <span class=\"ethcal-greg-year\"></span>\n              </div>\n              <button class=\"ethcal-greg-next-month\" aria-label=\"Next Month\">M></button>\n              <button class=\"ethcal-greg-next-year\" aria-label=\"Next Year\">Y></button>\n            </div>\n            <div class=\"ethcal-weekdays\">\n              <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>\n            </div>\n            <div class=\"ethcal-greg-days\"></div>\n          </div>\n          ` : ''}\n        </div>\n        <div class=\"ethcal-footer\">\n          <button class=\"ethcal-today\">Today</button>\n        </div>\n      `;\n    }\n    return popup;\n  }\n\n  /**\n   * Position popup near input element\n   */\n  positionPopup() {\n    if (this.options.inputElement) {\n      const rect = this.options.inputElement.getBoundingClientRect();\n      this.popup.style.position = 'absolute';\n      this.popup.style.top = (rect.bottom + window.scrollY + 5) + 'px';\n      this.popup.style.left = (rect.left + window.scrollX) + 'px';\n    } else {\n      // Center the popup if no input element\n      this.popup.style.position = 'fixed';\n      this.popup.style.top = '50%';\n      this.popup.style.left = '50%';\n      this.popup.style.transform = 'translate(-50%, -50%)';\n    }\n  }\n\n  /**\n   * Render the calendar\n   */\n  render() {\n    const { year, month } = this.currentEthDate;\n    \n    // Update calendar header\n    if (this.options.mergedView) {\n      const isPrimaryEthiopian = this.options.primaryCalendar === 'ethiopian';\n      \n      // Update button labels based on primary calendar\n      const yearPrevLabel = isPrimaryEthiopian ? '<አ' : '<Y';\n      const monthPrevLabel = isPrimaryEthiopian ? '<ወ' : '<M';\n      const monthNextLabel = isPrimaryEthiopian ? 'ወ>' : 'M>';\n      const yearNextLabel = isPrimaryEthiopian ? 'አ>' : 'Y>';\n      \n      this.popup.querySelector('.ethcal-prev-year').textContent = yearPrevLabel;\n      this.popup.querySelector('.ethcal-prev-month').textContent = monthPrevLabel;\n      this.popup.querySelector('.ethcal-next-month').textContent = monthNextLabel;\n      this.popup.querySelector('.ethcal-next-year').textContent = yearNextLabel;\n      \n      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',\n                          'July', 'August', 'September', 'October', 'November', 'December'];\n      \n      if (isPrimaryEthiopian) {\n        // Ethiopian is primary - use Amharic names and Ethiopian month\n        const primaryMonthName = this.calendar.getMonthName(month, true);\n        const primaryYear = year;\n        \n        this.popup.querySelector('.ethcal-month-name').textContent = primaryMonthName;\n        this.popup.querySelector('.ethcal-year').textContent = primaryYear;\n        \n        // Get secondary (Gregorian) month range\n        const secondaryRange = this.getSecondaryMonthRange(year, month, true);\n        let secondaryText = '';\n        \n        if (secondaryRange.isSameMonth) {\n          secondaryText = `${monthNames[secondaryRange.startMonth]} ${secondaryRange.startYear}`;\n        } else {\n          // Different months - show as range\n          const startMonthName = monthNames[secondaryRange.startMonth];\n          const endMonthName = monthNames[secondaryRange.endMonth];\n          \n          if (secondaryRange.startYear === secondaryRange.endYear) {\n            secondaryText = `${startMonthName} - ${endMonthName} ${secondaryRange.startYear}`;\n          } else {\n            secondaryText = `${startMonthName} ${secondaryRange.startYear} - ${endMonthName} ${secondaryRange.endYear}`;\n          }\n        }\n        \n        this.popup.querySelector('.ethcal-secondary-month-name').textContent = secondaryText;\n        this.popup.querySelector('.ethcal-secondary-year').textContent = '';\n      } else {\n        // Gregorian is primary - use English names and Gregorian month\n        const gregDate = this.calendar.toGregorian(year, month, 1);\n        const gregYear = gregDate.getFullYear();\n        const gregMonth = gregDate.getMonth();\n        \n        this.popup.querySelector('.ethcal-month-name').textContent = monthNames[gregMonth];\n        this.popup.querySelector('.ethcal-year').textContent = gregYear;\n        \n        // Get secondary (Ethiopian) month range - use Ethiopic script\n        const secondaryRange = this.getSecondaryMonthRange(gregYear, gregMonth, false);\n        let secondaryText = '';\n        \n        if (secondaryRange.isSameMonth) {\n          const ethMonthName = this.calendar.getMonthName(secondaryRange.startMonth, true);\n          secondaryText = `${ethMonthName} ${secondaryRange.startYear}`;\n        } else {\n          // Different months - show as range using Ethiopic script\n          const startMonthName = this.calendar.getMonthName(secondaryRange.startMonth, true);\n          const endMonthName = this.calendar.getMonthName(secondaryRange.endMonth, true);\n          \n          if (secondaryRange.startYear === secondaryRange.endYear) {\n            secondaryText = `${startMonthName} - ${endMonthName} ${secondaryRange.startYear}`;\n          } else {\n            secondaryText = `${startMonthName} ${secondaryRange.startYear} - ${endMonthName} ${secondaryRange.endYear}`;\n          }\n        }\n        \n        this.popup.querySelector('.ethcal-secondary-month-name').textContent = secondaryText;\n        this.popup.querySelector('.ethcal-secondary-year').textContent = '';\n      }\n      \n      const titleElement = this.popup.querySelector('.ethcal-calendar-title');\n      if (titleElement) {\n        titleElement.textContent = `${isPrimaryEthiopian ? 'Ethiopian' : 'Gregorian'} Calendar (Primary)`;\n      }\n    } else {\n      // Non-merged view - use the useAmharic option\n      this.popup.querySelector('.ethcal-month-name').textContent = \n        this.calendar.getMonthName(month, this.options.useAmharic);\n      // Year - always use Arabic numerals (not Ethiopic numbers)\n      this.popup.querySelector('.ethcal-year').textContent = year;\n    }\n    \n    // Update weekday names based on primary calendar or useAmharic option\n    this.updateWeekdayNames();\n    \n    // Render appropriate calendar view\n    if (this.options.mergedView) {\n      this.renderMergedCalendar();\n    } else {\n      // Render Ethiopian calendar days\n      this.renderDays();\n      \n      // Render Gregorian calendar if enabled\n      if (this.options.showGregorian) {\n        this.renderGregorianCalendar();\n      }\n    }\n  }\n\n  /**\n   * Update weekday names based on options\n   */\n  updateWeekdayNames() {\n    const selector = this.options.mergedView ? '.ethcal-merged-calendar .ethcal-weekdays' : '.ethcal-ethiopian .ethcal-weekdays';\n    const weekdaysContainer = this.popup.querySelector(selector);\n    if (weekdaysContainer) {\n      // In merged view, use primary calendar's language\n      // In non-merged view, use the useAmharic option\n      const useAmharic = this.options.mergedView \n        ? (this.options.primaryCalendar === 'ethiopian')\n        : this.options.useAmharic;\n      \n      if (useAmharic) {\n        weekdaysContainer.innerHTML = '<div>እሁድ</div><div>ሰኞ</div><div>ማክሰኞ</div><div>ረቡዕ</div><div>ሐሙስ</div><div>ዓርብ</div><div>ቅዳሜ</div>';\n      } else {\n        weekdaysContainer.innerHTML = '<div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>';\n      }\n    }\n  }\n\n  /**\n   * Render calendar days\n   */\n  renderDays() {\n    const { year, month } = this.currentEthDate;\n    const daysContainer = this.popup.querySelector('.ethcal-days');\n    daysContainer.innerHTML = '';\n    \n    const daysInMonth = this.calendar.getDaysInMonth(year, month);\n    const firstDayOfWeek = this.calendar.getDayOfWeek(year, month, 1);\n    \n    // Add empty cells for days before month starts\n    for (let i = 0; i < firstDayOfWeek; i++) {\n      const emptyCell = document.createElement('div');\n      emptyCell.className = 'ethcal-day ethcal-empty';\n      daysContainer.appendChild(emptyCell);\n    }\n    \n    // Add days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      const dayCell = document.createElement('div');\n      dayCell.className = 'ethcal-day';\n      const dayText = this.options.useEthiopicNumbers \n        ? this.calendar.toEthiopicNumeral(day)\n        : day;\n      dayCell.textContent = dayText;\n      dayCell.dataset.day = day;\n      dayCell.dataset.month = month;\n      dayCell.dataset.year = year;\n      \n      // Highlight today\n      const today = this.calendar.now();\n      if (year === today.year && month === today.month && day === today.day) {\n        dayCell.classList.add('ethcal-today-highlight');\n      }\n      \n      // Highlight selected date\n      if (this.selectedDate && \n          year === this.selectedDate.year && \n          month === this.selectedDate.month && \n          day === this.selectedDate.day) {\n        dayCell.classList.add('ethcal-selected');\n      }\n      \n      daysContainer.appendChild(dayCell);\n    }\n  }\n\n  /**\n   * Render Gregorian calendar synced with Ethiopian calendar\n   */\n  renderGregorianCalendar() {\n    const { year, month } = this.currentEthDate;\n    const daysInEthMonth = this.calendar.getDaysInMonth(year, month);\n    \n    // Get the Gregorian date range for the Ethiopian month\n    const firstEthDate = this.calendar.toGregorian(year, month, 1);\n    const lastEthDate = this.calendar.toGregorian(year, month, daysInEthMonth);\n    \n    // Determine the month(s) to display in header\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',\n                        'July', 'August', 'September', 'October', 'November', 'December'];\n    const firstMonth = firstEthDate.getMonth();\n    const firstYear = firstEthDate.getFullYear();\n    const lastMonth = lastEthDate.getMonth();\n    const lastYear = lastEthDate.getFullYear();\n    \n    // Update header to show the month range\n    let headerText = '';\n    if (firstMonth === lastMonth && firstYear === lastYear) {\n      headerText = monthNames[firstMonth];\n    } else if (firstYear === lastYear) {\n      headerText = `${monthNames[firstMonth]}-${monthNames[lastMonth]}`;\n    } else {\n      headerText = `${monthNames[firstMonth]} ${firstYear} - ${monthNames[lastMonth]} ${lastYear}`;\n    }\n    \n    this.popup.querySelector('.ethcal-greg-month-name').textContent = headerText;\n    this.popup.querySelector('.ethcal-greg-year').textContent = firstYear === lastYear ? firstYear : '';\n    \n    // Render days synchronized with Ethiopian calendar\n    const daysContainer = this.popup.querySelector('.ethcal-greg-days');\n    daysContainer.innerHTML = '';\n    \n    // Get the first day of the Ethiopian month to know how many empty cells to add\n    const firstDayOfWeek = this.calendar.getDayOfWeek(year, month, 1);\n    \n    // Add empty cells to align with Ethiopian calendar\n    for (let i = 0; i < firstDayOfWeek; i++) {\n      const emptyCell = document.createElement('div');\n      emptyCell.className = 'ethcal-day ethcal-empty';\n      daysContainer.appendChild(emptyCell);\n    }\n    \n    // Add Gregorian dates corresponding to each Ethiopian date\n    const todayGreg = new Date();\n    for (let ethDay = 1; ethDay <= daysInEthMonth; ethDay++) {\n      const gregDate = this.calendar.toGregorian(year, month, ethDay);\n      const gregDay = gregDate.getDate();\n      const gregMonth = gregDate.getMonth();\n      const gregYear = gregDate.getFullYear();\n      \n      const dayCell = document.createElement('div');\n      dayCell.className = 'ethcal-day ethcal-greg-day';\n      dayCell.textContent = gregDay;\n      dayCell.dataset.day = gregDay;\n      dayCell.dataset.month = gregMonth;\n      dayCell.dataset.year = gregYear;\n      dayCell.dataset.ethDay = ethDay;\n      dayCell.dataset.ethMonth = month;\n      dayCell.dataset.ethYear = year;\n      \n      // Highlight today\n      if (gregYear === todayGreg.getFullYear() && \n          gregMonth === todayGreg.getMonth() && \n          gregDay === todayGreg.getDate()) {\n        dayCell.classList.add('ethcal-today-highlight');\n      }\n      \n      // Highlight if this corresponds to the selected Ethiopian date\n      if (this.selectedDate && \n          year === this.selectedDate.year && \n          month === this.selectedDate.month && \n          ethDay === this.selectedDate.day) {\n        dayCell.classList.add('ethcal-selected');\n      }\n      \n      daysContainer.appendChild(dayCell);\n    }\n  }\n\n  /**\n   * Get the secondary month range for a given primary month\n   * Returns the secondary months that overlap with the primary month\n   */\n  getSecondaryMonthRange(year, month, isPrimaryEthiopian) {\n    if (isPrimaryEthiopian) {\n      // Primary is Ethiopian, secondary is Gregorian\n      const firstDay = this.calendar.toGregorian(year, month, 1);\n      const daysInMonth = this.calendar.getDaysInMonth(year, month);\n      const lastDay = this.calendar.toGregorian(year, month, daysInMonth);\n      \n      const firstMonth = firstDay.getMonth();\n      const firstYear = firstDay.getFullYear();\n      const lastMonth = lastDay.getMonth();\n      const lastYear = lastDay.getFullYear();\n      \n      return {\n        startMonth: firstMonth,\n        startYear: firstYear,\n        endMonth: lastMonth,\n        endYear: lastYear,\n        isSameMonth: firstMonth === lastMonth && firstYear === lastYear\n      };\n    } else {\n      // Primary is Gregorian, secondary is Ethiopian\n      const firstDay = new Date(year, month, 1);\n      const lastDay = new Date(year, month + 1, 0); // Last day of month\n      \n      const firstEth = this.calendar.toEthiopian(firstDay);\n      const lastEth = this.calendar.toEthiopian(lastDay);\n      \n      return {\n        startMonth: firstEth.month,\n        startYear: firstEth.year,\n        endMonth: lastEth.month,\n        endYear: lastEth.year,\n        isSameMonth: firstEth.month === lastEth.month && firstEth.year === lastEth.year\n      };\n    }\n  }\n\n  /**\n   * Render merged calendar showing both Ethiopian and Gregorian dates\n   */\n  renderMergedCalendar() {\n    const { year, month } = this.currentEthDate;\n    const isPrimaryEthiopian = this.options.primaryCalendar === 'ethiopian';\n    \n    const daysContainer = this.popup.querySelector('.ethcal-merged-days');\n    daysContainer.innerHTML = '';\n    \n    if (isPrimaryEthiopian) {\n      // Ethiopian is primary\n      const daysInMonth = this.calendar.getDaysInMonth(year, month);\n      const firstDayOfWeek = this.calendar.getDayOfWeek(year, month, 1);\n      \n      // Add empty cells for days before month starts\n      for (let i = 0; i < firstDayOfWeek; i++) {\n        const emptyCell = document.createElement('div');\n        emptyCell.className = 'ethcal-day ethcal-empty';\n        daysContainer.appendChild(emptyCell);\n      }\n      \n      // Add days of the month\n      const today = this.calendar.now();\n      for (let day = 1; day <= daysInMonth; day++) {\n        const dayCell = document.createElement('div');\n        dayCell.className = 'ethcal-day ethcal-merged-day';\n        \n        // Primary date (Ethiopian) - use Ethiopic numbers if enabled\n        const primaryText = this.options.useEthiopicNumbers \n          ? this.calendar.toEthiopicNumeral(day)\n          : day;\n        \n        // Secondary date (Gregorian) - always use Arabic numerals\n        const gregDate = this.calendar.toGregorian(year, month, day);\n        const secondaryText = gregDate.getDate();\n        \n        dayCell.innerHTML = `\n          <span class=\"ethcal-primary-date\">${primaryText}</span>\n          <span class=\"ethcal-secondary-date\">${secondaryText}</span>\n        `;\n        \n        dayCell.dataset.day = day;\n        dayCell.dataset.month = month;\n        dayCell.dataset.year = year;\n        dayCell.dataset.gregDay = gregDate.getDate();\n        dayCell.dataset.gregMonth = gregDate.getMonth();\n        dayCell.dataset.gregYear = gregDate.getFullYear();\n        \n        // Highlight today\n        if (year === today.year && month === today.month && day === today.day) {\n          dayCell.classList.add('ethcal-today-highlight');\n        }\n        \n        // Highlight selected date\n        if (this.selectedDate && \n            year === this.selectedDate.year && \n            month === this.selectedDate.month && \n            day === this.selectedDate.day) {\n          dayCell.classList.add('ethcal-selected');\n        }\n        \n        daysContainer.appendChild(dayCell);\n      }\n    } else {\n      // Gregorian is primary\n      const gregDate = this.calendar.toGregorian(year, month, 1);\n      const gregYear = gregDate.getFullYear();\n      const gregMonth = gregDate.getMonth();\n      \n      const firstDay = new Date(gregYear, gregMonth, 1).getDay();\n      const daysInMonth = new Date(gregYear, gregMonth + 1, 0).getDate();\n      \n      // Add empty cells\n      for (let i = 0; i < firstDay; i++) {\n        const emptyCell = document.createElement('div');\n        emptyCell.className = 'ethcal-day ethcal-empty';\n        daysContainer.appendChild(emptyCell);\n      }\n      \n      // Add days\n      const todayGreg = new Date();\n      for (let d = 1; d <= daysInMonth; d++) {\n        const dayCell = document.createElement('div');\n        dayCell.className = 'ethcal-day ethcal-merged-day';\n        \n        // Primary date (Gregorian) - always use Arabic numerals\n        const primaryText = d;\n        \n        // Secondary date (Ethiopian) - use Ethiopic numbers if enabled\n        const currentGreg = new Date(gregYear, gregMonth, d);\n        const ethDate = this.calendar.toEthiopian(currentGreg);\n        const secondaryText = this.options.useEthiopicNumbers \n          ? this.calendar.toEthiopicNumeral(ethDate.day)\n          : ethDate.day;\n        \n        dayCell.innerHTML = `\n          <span class=\"ethcal-primary-date\">${primaryText}</span>\n          <span class=\"ethcal-secondary-date\">${secondaryText}</span>\n        `;\n        \n        dayCell.dataset.day = ethDate.day;\n        dayCell.dataset.month = ethDate.month;\n        dayCell.dataset.year = ethDate.year;\n        dayCell.dataset.gregDay = d;\n        dayCell.dataset.gregMonth = gregMonth;\n        dayCell.dataset.gregYear = gregYear;\n        \n        // Highlight today\n        if (gregYear === todayGreg.getFullYear() && \n            gregMonth === todayGreg.getMonth() && \n            d === todayGreg.getDate()) {\n          dayCell.classList.add('ethcal-today-highlight');\n        }\n        \n        // Highlight selected date\n        if (this.selectedDate) {\n          const selectedGreg = this.calendar.toGregorian(\n            this.selectedDate.year, \n            this.selectedDate.month, \n            this.selectedDate.day\n          );\n          if (gregYear === selectedGreg.getFullYear() && \n              gregMonth === selectedGreg.getMonth() && \n              d === selectedGreg.getDate()) {\n            dayCell.classList.add('ethcal-selected');\n          }\n        }\n        \n        daysContainer.appendChild(dayCell);\n      }\n    }\n  }\n\n  /**\n   * Attach event listeners\n   */\n  attachEventListeners() {\n    // Ethiopian calendar navigation buttons\n    this.popup.querySelector('.ethcal-prev-year').addEventListener('click', () => {\n      this.currentEthDate.year--;\n      this.render();\n    });\n    \n    this.popup.querySelector('.ethcal-next-year').addEventListener('click', () => {\n      this.currentEthDate.year++;\n      this.render();\n    });\n    \n    this.popup.querySelector('.ethcal-prev-month').addEventListener('click', () => {\n      this.currentEthDate.month--;\n      if (this.currentEthDate.month < 1) {\n        this.currentEthDate.month = 13;\n        this.currentEthDate.year--;\n      }\n      this.render();\n    });\n    \n    this.popup.querySelector('.ethcal-next-month').addEventListener('click', () => {\n      this.currentEthDate.month++;\n      if (this.currentEthDate.month > 13) {\n        this.currentEthDate.month = 1;\n        this.currentEthDate.year++;\n      }\n      this.render();\n    });\n\n    // Gregorian calendar navigation buttons (if enabled and not merged)\n    if (this.options.showGregorian && !this.options.mergedView) {\n      this.popup.querySelector('.ethcal-greg-prev-year').addEventListener('click', () => {\n        const gregDate = this.calendar.toGregorian(this.currentEthDate.year, this.currentEthDate.month, 15);\n        gregDate.setFullYear(gregDate.getFullYear() - 1);\n        this.currentEthDate = this.calendar.toEthiopian(gregDate);\n        this.render();\n      });\n      \n      this.popup.querySelector('.ethcal-greg-next-year').addEventListener('click', () => {\n        const gregDate = this.calendar.toGregorian(this.currentEthDate.year, this.currentEthDate.month, 15);\n        gregDate.setFullYear(gregDate.getFullYear() + 1);\n        this.currentEthDate = this.calendar.toEthiopian(gregDate);\n        this.render();\n      });\n      \n      this.popup.querySelector('.ethcal-greg-prev-month').addEventListener('click', () => {\n        const gregDate = this.calendar.toGregorian(this.currentEthDate.year, this.currentEthDate.month, 15);\n        gregDate.setMonth(gregDate.getMonth() - 1);\n        this.currentEthDate = this.calendar.toEthiopian(gregDate);\n        this.render();\n      });\n      \n      this.popup.querySelector('.ethcal-greg-next-month').addEventListener('click', () => {\n        const gregDate = this.calendar.toGregorian(this.currentEthDate.year, this.currentEthDate.month, 15);\n        gregDate.setMonth(gregDate.getMonth() + 1);\n        this.currentEthDate = this.calendar.toEthiopian(gregDate);\n        this.render();\n      });\n\n      // Gregorian day selection\n      this.popup.querySelector('.ethcal-greg-days').addEventListener('click', (e) => {\n        if (e.target.classList.contains('ethcal-greg-day')) {\n          const day = parseInt(e.target.dataset.day);\n          const month = parseInt(e.target.dataset.month);\n          const year = parseInt(e.target.dataset.year);\n          \n          const gregorianDate = new Date(year, month, day);\n          const ethiopianDate = this.calendar.toEthiopian(gregorianDate);\n          \n          this.selectedDate = ethiopianDate;\n          this.currentEthDate = ethiopianDate;\n          this.render();\n          \n          if (this.options.onSelect) {\n            this.options.onSelect({\n              ethiopian: ethiopianDate,\n              gregorian: gregorianDate\n            });\n          }\n          \n          // Update input if provided\n          if (this.options.inputElement) {\n            this.options.inputElement.value = `${ethiopianDate.day}/${ethiopianDate.month}/${ethiopianDate.year}`;\n          }\n          \n          this.hide();\n        }\n      });\n    }\n    \n    // Day selection (Ethiopian or merged)\n    const daysSelector = this.options.mergedView ? '.ethcal-merged-days' : '.ethcal-days';\n    this.popup.querySelector(daysSelector).addEventListener('click', (e) => {\n      if (e.target.closest('.ethcal-day') && !e.target.closest('.ethcal-empty')) {\n        const dayCell = e.target.closest('.ethcal-day');\n        const day = parseInt(dayCell.dataset.day);\n        const month = parseInt(dayCell.dataset.month);\n        const year = parseInt(dayCell.dataset.year);\n        \n        this.selectedDate = { year, month, day };\n        this.render();\n        \n        if (this.options.onSelect) {\n          const gregorianDate = this.calendar.toGregorian(year, month, day);\n          this.options.onSelect({\n            ethiopian: { year, month, day },\n            gregorian: gregorianDate\n          });\n        }\n        \n        // Update input if provided\n        if (this.options.inputElement) {\n          this.options.inputElement.value = `${day}/${month}/${year}`;\n        }\n        \n        this.hide();\n      }\n    });\n    \n    // Today button\n    this.popup.querySelector('.ethcal-today').addEventListener('click', () => {\n      this.currentEthDate = this.calendar.now();\n      this.render();\n    });\n    \n    // Close on outside click\n    document.addEventListener('click', (e) => {\n      if (this.popup && \n          !this.popup.contains(e.target) && \n          e.target !== this.options.inputElement) {\n        this.hide();\n      }\n    });\n  }\n\n  /**\n   * Set the current date\n   * @param {Date} date - Gregorian date\n   */\n  setDate(date) {\n    this.currentEthDate = this.calendar.toEthiopian(date);\n    if (this.popup) {\n      this.render();\n    }\n  }\n\n  /**\n   * Get the selected date\n   * @returns {Object} Selected date info\n   */\n  getSelectedDate() {\n    return this.selectedDate;\n  }\n}\n\nexport default EthiopianCalendarUI;\n"],"names":["EthiopianCalendar","constructor","this","monthNames","monthNamesAmharic","dayNames","dayNamesAmharic","_startDayOfEthiopian","year","newYearDay","Math","floor","toEthiopian","gregorianDate","getFullYear","month","getMonth","date","getDate","Error","gregorianMonths","ethiopianMonths","ethiopianYear","until","i","m","ethiopianDate","tahissas","length","day","toGregorian","gregorianYear","nextYear","Date","getDaysInMonth","isLeapYear","getDayOfWeek","getDay","getMonthName","useAmharic","getDayName","dayOfWeek","toEthiopicNumeral","num","ethiopicNumerals","result","remaining","tens","ones","toString","split","map","d","parseInt","join","now","EthiopianCalendarUI","options","calendar","onSelect","inputElement","initialDate","showGregorian","undefined","useEthiopicNumbers","mergedView","primaryCalendar","currentEthDate","selectedDate","popup","show","style","display","createPopup","document","body","appendChild","positionPopup","render","attachEventListeners","hide","destroy","remove","createElement","className","dayNamesHtml","isPrimaryEthiopian","yearPrevLabel","monthPrevLabel","monthNextLabel","yearNextLabel","innerHTML","rect","getBoundingClientRect","position","top","bottom","window","scrollY","left","scrollX","transform","querySelector","textContent","primaryMonthName","primaryYear","secondaryRange","getSecondaryMonthRange","secondaryText","isSameMonth","startMonth","startYear","startMonthName","endMonthName","endMonth","endYear","gregDate","gregYear","gregMonth","titleElement","updateWeekdayNames","renderMergedCalendar","renderDays","renderGregorianCalendar","selector","weekdaysContainer","daysContainer","daysInMonth","firstDayOfWeek","emptyCell","dayCell","dayText","dataset","today","classList","add","daysInEthMonth","firstEthDate","lastEthDate","firstMonth","firstYear","lastMonth","lastYear","headerText","todayGreg","ethDay","gregDay","ethMonth","ethYear","firstDay","lastDay","firstEth","lastEth","primaryText","currentGreg","ethDate","selectedGreg","addEventListener","setFullYear","setMonth","e","target","contains","ethiopian","gregorian","value","daysSelector","closest","setDate","getSelectedDate"],"mappings":"AAMA,MAAMA,EACJ,WAAAC,GACEC,KAAKC,WAAa,CAChB,WAAY,SAAU,QAAS,SAAU,MAAO,UAChD,UAAW,SAAU,SAAU,OAAQ,QAAS,SAAU,UAG5DD,KAAKE,kBAAoB,CACvB,QAAS,OAAQ,MAAO,OAAQ,KAAM,OACtC,OAAQ,OAAQ,OAAQ,KAAM,MAAO,MAAO,QAG9CF,KAAKG,SAAW,CAAC,OAAQ,QAAS,WAAY,OAAQ,QAAS,MAAO,UAEtEH,KAAKI,gBAAkB,CAAC,MAAO,KAAM,OAAQ,MAAO,MAAO,MAAO,MACpE,CAQA,oBAAAC,CAAqBC,GACnB,MAAMC,EAAaC,KAAKC,MAAMH,EAAO,KAAOE,KAAKC,MAAMH,EAAO,KAAO,EAErE,OAASA,EAAO,GAAK,GAAM,EAAKC,EAAa,EAAIA,CACnD,CAOA,WAAAG,CAAYC,GACV,MAAML,EAAOK,EAAcC,cACrBC,EAAQF,EAAcG,WAAa,EACnCC,EAAOJ,EAAcK,UAG3B,GAAc,KAAVH,GAAgBE,GAAQ,GAAKA,GAAQ,IAAe,OAATT,EAC7C,MAAM,IAAIW,MAAM,uCAIlB,MAAMC,EAAkB,CAAC,EAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGpEC,EAAkB,CAAC,EAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,KAG5Eb,EAAO,GAAM,GAAKA,EAAO,KAAQ,GAAMA,EAAO,KAAQ,KACzDY,EAAgB,GAAK,IAIvB,IAAIE,EAAgBd,EAAO,EAGvBc,EAAgB,GAAM,IACxBD,EAAgB,IAAM,GAIxB,MAAMZ,EAAaP,KAAKK,qBAAqBC,EAAO,GAGpD,IAAIe,EAAQ,EACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAOS,IACzBD,GAASH,EAAgBI,GAE3BD,GAASN,EAGT,IAeIQ,EACAC,EAhBAC,EAAYL,EAAgB,GAAO,EAAI,GAAK,GAiBhD,IAdId,EAAO,MAGAe,GAAS,KAAgB,OAATf,GAFzBa,EAAgB,GAAK,EACrBA,EAAgB,GAAKM,IAKrBA,EAAWlB,EAAa,EACxBY,EAAgB,GAAKM,GAMlBF,EAAI,EAAGA,EAAIJ,EAAgBO,OAAQH,IAAK,CAC3C,GAAIF,GAASF,EAAgBI,GAAI,CAC/BC,EAAuB,IAAND,GAAkC,IAAvBJ,EAAgBI,GAAYF,GAAS,GAAKI,GAAYJ,EAClF,KACF,CACEA,GAASF,EAAgBI,EAE7B,CAGIA,EAAI,KACNH,GAAiB,GAOnB,MAAO,CACLd,KAAMc,EACNP,MALY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAChCU,GAK3BI,IAAKH,EAET,CASA,WAAAI,CAAYtB,EAAMO,EAAOc,GAEvB,MAAMpB,EAAaP,KAAKK,qBAAqBC,GAG7C,IAAIuB,EAAgBvB,EAAO,EAMvBY,EAAkB,CAAC,EAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAG5E,MAAMY,EAAWD,EAAgB,GAC5BC,EAAW,GAAM,GAAKA,EAAW,KAAQ,GAAMA,EAAW,KAAQ,KACrEZ,EAAgB,GAAK,IAIvB,IAAIG,EAAuB,IAAbR,EAAQ,GAAac,EAC/BN,GAAS,IAAMf,GAAQ,MACzBe,GAAS,GACTH,EAAgB,GAAK,IAErBG,GAASd,EAAa,GAInBD,EAAO,GAAK,GAAM,IACrBe,GAAS,GAIX,IACIV,EADAY,EAAI,EAER,IAAK,IAAID,EAAI,EAAGA,EAAIJ,EAAgBQ,OAAQJ,IAAK,CAC/C,GAAID,GAASH,EAAgBI,GAAI,CAC/BC,EAAID,EACJX,EAAgBU,EAChB,KACF,CACEE,EAAID,EACJD,GAASH,EAAgBI,EAE7B,CAGIC,EAAI,IACNM,GAAiB,GAOnB,OAAO,IAAIE,KAAKF,EAHF,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5BN,GAEmB,EAAGZ,EACrD,CAQA,cAAAqB,CAAe1B,EAAMO,GACnB,OAAIA,EAAQ,GACH,GAGFb,KAAKiC,WAAW3B,GAAQ,EAAI,CACrC,CAOA,UAAA2B,CAAW3B,GACT,OAAQA,EAAO,GAAO,CACxB,CASA,YAAA4B,CAAa5B,EAAMO,EAAOc,GAExB,OADiB3B,KAAK4B,YAAYtB,EAAMO,EAAOc,GAC/BQ,QAClB,CAQA,YAAAC,CAAavB,EAAOwB,GAAa,GAE/B,OADcA,EAAarC,KAAKE,kBAAoBF,KAAKC,YAC5CY,EAAQ,IAAM,EAC7B,CAQA,UAAAyB,CAAWC,EAAWF,GAAa,GAEjC,OADcA,EAAarC,KAAKI,gBAAkBJ,KAAKG,UAC1CoC,IAAc,EAC7B,CAOA,iBAAAC,CAAkBC,GAChB,GAAY,IAARA,EAAW,MAAO,IAEtB,MAAMC,EAAmB,CACvB,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IACnC,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,GAAI,IACpC,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAC/B,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAC/B,IAAK,IAAK,IAAO,KAGnB,GAAIA,EAAiBD,GACnB,OAAOC,EAAiBD,GAG1B,IAAIE,EAAS,GACTC,EAAYH,EAGhB,GAAIG,EAAY,IAAK,CACnB,MAAMC,EAAoC,GAA7BrC,KAAKC,MAAMmC,EAAY,IAC9BE,EAAOF,EAAY,GAKzB,OAHIC,EAAO,IAAGF,GAAUD,EAAiBG,IACrCC,EAAO,IAAGH,GAAUD,EAAiBI,IAElCH,CACT,CAIA,OADeF,EAAIM,WAAWC,MAAM,IACtBC,IAAIC,GAAKR,EAAiBS,SAASD,KAAOA,GAAGE,KAAK,GAClE,CAMA,GAAAC,GACE,OAAOrD,KAAKU,YAAY,IAAIqB,KAC9B,EC7RF,MAAMuB,EACJ,WAAAvD,CAAYwD,EAAU,IACpBvD,KAAKwD,SAAW,IAAI1D,EACpBE,KAAKuD,QAAU,CACbE,SAAUF,EAAQE,UAAY,KAC9BC,aAAcH,EAAQG,cAAgB,KACtCC,YAAaJ,EAAQI,aAAe,IAAI5B,KACxC6B,mBAAyCC,IAA1BN,EAAQK,eAA8BL,EAAQK,cAC7DvB,gBAAmCwB,IAAvBN,EAAQlB,YAA2BkB,EAAQlB,WACvDyB,wBAAmDD,IAA/BN,EAAQO,oBAAmCP,EAAQO,mBACvEC,gBAAmCF,IAAvBN,EAAQQ,YAA2BR,EAAQQ,WACvDC,gBAAiBT,EAAQS,iBAAmB,eACzCT,GAGLvD,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYV,KAAKuD,QAAQI,aAC7D3D,KAAKkE,aAAe,KACpBlE,KAAKmE,MAAQ,IACf,CAKA,IAAAC,GACMpE,KAAKmE,MACPnE,KAAKmE,MAAME,MAAMC,QAAU,SAI7BtE,KAAKmE,MAAQnE,KAAKuE,cAClBC,SAASC,KAAKC,YAAY1E,KAAKmE,OAG/BnE,KAAK2E,gBAEL3E,KAAK4E,SACL5E,KAAK6E,uBACP,CAKA,IAAAC,GACM9E,KAAKmE,QACPnE,KAAKmE,MAAME,MAAMC,QAAU,OAE/B,CAKA,OAAAS,GACM/E,KAAKmE,QACPnE,KAAKmE,MAAMa,SACXhF,KAAKmE,MAAQ,KAEjB,CAKA,WAAAI,GACE,MAAMJ,EAAQK,SAASS,cAAc,OACrCd,EAAMe,UAAY,eAElB,MAAMC,EAAenF,KAAKuD,QAAQlB,WAC9B,qGACA,qGAGJ,GAAIrC,KAAKuD,QAAQQ,WAAY,CAC3B,MAAMqB,EAAsD,cAAjCpF,KAAKuD,QAAQS,gBAElCqB,EAAgBD,EAAqB,KAAO,KAC5CE,EAAiBF,EAAqB,KAAO,KAC7CG,EAAiBH,EAAqB,KAAO,KAC7CI,EAAgBJ,EAAqB,KAAO,KAElDjB,EAAMsB,UAAY,8OAIoDJ,2FACEC,yiBAWJC,qFACFC,4EAE7BL,+NAQvC,MAEEhB,EAAMsB,UAAY,mtBAamBN,qFAG/BnF,KAAKuD,QAAQK,cAAgB,+5BAiB3B,yIAOV,OAAOO,CACT,CAKA,aAAAQ,GACE,GAAI3E,KAAKuD,QAAQG,aAAc,CAC7B,MAAMgC,EAAO1F,KAAKuD,QAAQG,aAAaiC,wBACvC3F,KAAKmE,MAAME,MAAMuB,SAAW,WAC5B5F,KAAKmE,MAAME,MAAMwB,IAAOH,EAAKI,OAASC,OAAOC,QAAU,EAAK,KAC5DhG,KAAKmE,MAAME,MAAM4B,KAAQP,EAAKO,KAAOF,OAAOG,QAAW,IACzD,MAEElG,KAAKmE,MAAME,MAAMuB,SAAW,QAC5B5F,KAAKmE,MAAME,MAAMwB,IAAM,MACvB7F,KAAKmE,MAAME,MAAM4B,KAAO,MACxBjG,KAAKmE,MAAME,MAAM8B,UAAY,uBAEjC,CAKA,MAAAvB,GACE,MAAMtE,KAAEA,EAAIO,MAAEA,GAAUb,KAAKiE,eAG7B,GAAIjE,KAAKuD,QAAQQ,WAAY,CAC3B,MAAMqB,EAAsD,cAAjCpF,KAAKuD,QAAQS,gBAGlCqB,EAAgBD,EAAqB,KAAO,KAC5CE,EAAiBF,EAAqB,KAAO,KAC7CG,EAAiBH,EAAqB,KAAO,KAC7CI,EAAgBJ,EAAqB,KAAO,KAElDpF,KAAKmE,MAAMiC,cAAc,qBAAqBC,YAAchB,EAC5DrF,KAAKmE,MAAMiC,cAAc,sBAAsBC,YAAcf,EAC7DtF,KAAKmE,MAAMiC,cAAc,sBAAsBC,YAAcd,EAC7DvF,KAAKmE,MAAMiC,cAAc,qBAAqBC,YAAcb,EAE5D,MAAMvF,EAAa,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAChD,OAAQ,SAAU,YAAa,UAAW,WAAY,YAE1E,GAAImF,EAAoB,CAEtB,MAAMkB,EAAmBtG,KAAKwD,SAASpB,aAAavB,GAAO,GACrD0F,EAAcjG,EAEpBN,KAAKmE,MAAMiC,cAAc,sBAAsBC,YAAcC,EAC7DtG,KAAKmE,MAAMiC,cAAc,gBAAgBC,YAAcE,EAGvD,MAAMC,EAAiBxG,KAAKyG,uBAAuBnG,EAAMO,GAAO,GAChE,IAAI6F,EAAgB,GAEpB,GAAIF,EAAeG,YACjBD,EAAgB,GAAGzG,EAAWuG,EAAeI,eAAeJ,EAAeK,gBACtE,CAEL,MAAMC,EAAiB7G,EAAWuG,EAAeI,YAC3CG,EAAe9G,EAAWuG,EAAeQ,UAG7CN,EADEF,EAAeK,YAAcL,EAAeS,QAC9B,GAAGH,OAAoBC,KAAgBP,EAAeK,YAEtD,GAAGC,KAAkBN,EAAeK,eAAeE,KAAgBP,EAAeS,SAEtG,CAEAjH,KAAKmE,MAAMiC,cAAc,gCAAgCC,YAAcK,EACvE1G,KAAKmE,MAAMiC,cAAc,0BAA0BC,YAAc,EACnE,KAAO,CAEL,MAAMa,EAAWlH,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAO,GAClDsG,EAAWD,EAAStG,cACpBwG,EAAYF,EAASpG,WAE3Bd,KAAKmE,MAAMiC,cAAc,sBAAsBC,YAAcpG,EAAWmH,GACxEpH,KAAKmE,MAAMiC,cAAc,gBAAgBC,YAAcc,EAGvD,MAAMX,EAAiBxG,KAAKyG,uBAAuBU,EAAUC,GAAW,GACxE,IAAIV,EAAgB,GAEpB,GAAIF,EAAeG,YAAa,CAE9BD,EAAgB,GADK1G,KAAKwD,SAASpB,aAAaoE,EAAeI,YAAY,MACxCJ,EAAeK,WACpD,KAAO,CAEL,MAAMC,EAAiB9G,KAAKwD,SAASpB,aAAaoE,EAAeI,YAAY,GACvEG,EAAe/G,KAAKwD,SAASpB,aAAaoE,EAAeQ,UAAU,GAGvEN,EADEF,EAAeK,YAAcL,EAAeS,QAC9B,GAAGH,OAAoBC,KAAgBP,EAAeK,YAEtD,GAAGC,KAAkBN,EAAeK,eAAeE,KAAgBP,EAAeS,SAEtG,CAEAjH,KAAKmE,MAAMiC,cAAc,gCAAgCC,YAAcK,EACvE1G,KAAKmE,MAAMiC,cAAc,0BAA0BC,YAAc,EACnE,CAEA,MAAMgB,EAAerH,KAAKmE,MAAMiC,cAAc,0BAC1CiB,IACFA,EAAahB,aAAiBjB,EAAqB,YAAc,aAAtC,sBAE/B,MAEEpF,KAAKmE,MAAMiC,cAAc,sBAAsBC,YAC7CrG,KAAKwD,SAASpB,aAAavB,EAAOb,KAAKuD,QAAQlB,YAEjDrC,KAAKmE,MAAMiC,cAAc,gBAAgBC,YAAc/F,EAIzDN,KAAKsH,qBAGDtH,KAAKuD,QAAQQ,WACf/D,KAAKuH,wBAGLvH,KAAKwH,aAGDxH,KAAKuD,QAAQK,eACf5D,KAAKyH,0BAGX,CAKA,kBAAAH,GACE,MAAMI,EAAW1H,KAAKuD,QAAQQ,WAAa,2CAA6C,qCAClF4D,EAAoB3H,KAAKmE,MAAMiC,cAAcsB,GACnD,GAAIC,EAAmB,CAGrB,MAAMtF,EAAarC,KAAKuD,QAAQQ,WACM,cAAjC/D,KAAKuD,QAAQS,gBACdhE,KAAKuD,QAAQlB,WAGfsF,EAAkBlC,UADhBpD,EAC4B,qGAEA,oGAElC,CACF,CAKA,UAAAmF,GACE,MAAMlH,KAAEA,EAAIO,MAAEA,GAAUb,KAAKiE,eACvB2D,EAAgB5H,KAAKmE,MAAMiC,cAAc,gBAC/CwB,EAAcnC,UAAY,GAE1B,MAAMoC,EAAc7H,KAAKwD,SAASxB,eAAe1B,EAAMO,GACjDiH,EAAiB9H,KAAKwD,SAAStB,aAAa5B,EAAMO,EAAO,GAG/D,IAAK,IAAIS,EAAI,EAAGA,EAAIwG,EAAgBxG,IAAK,CACvC,MAAMyG,EAAYvD,SAASS,cAAc,OACzC8C,EAAU7C,UAAY,0BACtB0C,EAAclD,YAAYqD,EAC5B,CAGA,IAAK,IAAIpG,EAAM,EAAGA,GAAOkG,EAAalG,IAAO,CAC3C,MAAMqG,EAAUxD,SAASS,cAAc,OACvC+C,EAAQ9C,UAAY,aACpB,MAAM+C,EAAUjI,KAAKuD,QAAQO,mBACzB9D,KAAKwD,SAAShB,kBAAkBb,GAChCA,EACJqG,EAAQ3B,YAAc4B,EACtBD,EAAQE,QAAQvG,IAAMA,EACtBqG,EAAQE,QAAQrH,MAAQA,EACxBmH,EAAQE,QAAQ5H,KAAOA,EAGvB,MAAM6H,EAAQnI,KAAKwD,SAASH,MACxB/C,IAAS6H,EAAM7H,MAAQO,IAAUsH,EAAMtH,OAASc,IAAQwG,EAAMxG,KAChEqG,EAAQI,UAAUC,IAAI,0BAIpBrI,KAAKkE,cACL5D,IAASN,KAAKkE,aAAa5D,MAC3BO,IAAUb,KAAKkE,aAAarD,OAC5Bc,IAAQ3B,KAAKkE,aAAavC,KAC5BqG,EAAQI,UAAUC,IAAI,mBAGxBT,EAAclD,YAAYsD,EAC5B,CACF,CAKA,uBAAAP,GACE,MAAMnH,KAAEA,EAAIO,MAAEA,GAAUb,KAAKiE,eACvBqE,EAAiBtI,KAAKwD,SAASxB,eAAe1B,EAAMO,GAGpD0H,EAAevI,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAO,GACtD2H,EAAcxI,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAOyH,GAGrDrI,EAAa,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAChD,OAAQ,SAAU,YAAa,UAAW,WAAY,YACpEwI,EAAaF,EAAazH,WAC1B4H,EAAYH,EAAa3H,cACzB+H,EAAYH,EAAY1H,WACxB8H,EAAWJ,EAAY5H,cAG7B,IAAIiI,EAAa,GAEfA,EADEJ,IAAeE,GAAaD,IAAcE,EAC/B3I,EAAWwI,GACfC,IAAcE,EACV,GAAG3I,EAAWwI,MAAexI,EAAW0I,KAExC,GAAG1I,EAAWwI,MAAeC,OAAezI,EAAW0I,MAAcC,IAGpF5I,KAAKmE,MAAMiC,cAAc,2BAA2BC,YAAcwC,EAClE7I,KAAKmE,MAAMiC,cAAc,qBAAqBC,YAAcqC,IAAcE,EAAWF,EAAY,GAGjG,MAAMd,EAAgB5H,KAAKmE,MAAMiC,cAAc,qBAC/CwB,EAAcnC,UAAY,GAG1B,MAAMqC,EAAiB9H,KAAKwD,SAAStB,aAAa5B,EAAMO,EAAO,GAG/D,IAAK,IAAIS,EAAI,EAAGA,EAAIwG,EAAgBxG,IAAK,CACvC,MAAMyG,EAAYvD,SAASS,cAAc,OACzC8C,EAAU7C,UAAY,0BACtB0C,EAAclD,YAAYqD,EAC5B,CAGA,MAAMe,EAAY,IAAI/G,KACtB,IAAK,IAAIgH,EAAS,EAAGA,GAAUT,EAAgBS,IAAU,CACvD,MAAM7B,EAAWlH,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAOkI,GAClDC,EAAU9B,EAASlG,UACnBoG,EAAYF,EAASpG,WACrBqG,EAAWD,EAAStG,cAEpBoH,EAAUxD,SAASS,cAAc,OACvC+C,EAAQ9C,UAAY,6BACpB8C,EAAQ3B,YAAc2C,EACtBhB,EAAQE,QAAQvG,IAAMqH,EACtBhB,EAAQE,QAAQrH,MAAQuG,EACxBY,EAAQE,QAAQ5H,KAAO6G,EACvBa,EAAQE,QAAQa,OAASA,EACzBf,EAAQE,QAAQe,SAAWpI,EAC3BmH,EAAQE,QAAQgB,QAAU5I,EAGtB6G,IAAa2B,EAAUlI,eACvBwG,IAAc0B,EAAUhI,YACxBkI,IAAYF,EAAU9H,WACxBgH,EAAQI,UAAUC,IAAI,0BAIpBrI,KAAKkE,cACL5D,IAASN,KAAKkE,aAAa5D,MAC3BO,IAAUb,KAAKkE,aAAarD,OAC5BkI,IAAW/I,KAAKkE,aAAavC,KAC/BqG,EAAQI,UAAUC,IAAI,mBAGxBT,EAAclD,YAAYsD,EAC5B,CACF,CAMA,sBAAAvB,CAAuBnG,EAAMO,EAAOuE,GAClC,GAAIA,EAAoB,CAEtB,MAAM+D,EAAWnJ,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAO,GAClDgH,EAAc7H,KAAKwD,SAASxB,eAAe1B,EAAMO,GACjDuI,EAAUpJ,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAOgH,GAEjDY,EAAaU,EAASrI,WACtB4H,EAAYS,EAASvI,cACrB+H,EAAYS,EAAQtI,WACpB8H,EAAWQ,EAAQxI,cAEzB,MAAO,CACLgG,WAAY6B,EACZ5B,UAAW6B,EACX1B,SAAU2B,EACV1B,QAAS2B,EACTjC,YAAa8B,IAAeE,GAAaD,IAAcE,EAE3D,CAAO,CAEL,MAAMO,EAAW,IAAIpH,KAAKzB,EAAMO,EAAO,GACjCuI,EAAU,IAAIrH,KAAKzB,EAAMO,EAAQ,EAAG,GAEpCwI,EAAWrJ,KAAKwD,SAAS9C,YAAYyI,GACrCG,EAAUtJ,KAAKwD,SAAS9C,YAAY0I,GAE1C,MAAO,CACLxC,WAAYyC,EAASxI,MACrBgG,UAAWwC,EAAS/I,KACpB0G,SAAUsC,EAAQzI,MAClBoG,QAASqC,EAAQhJ,KACjBqG,YAAa0C,EAASxI,QAAUyI,EAAQzI,OAASwI,EAAS/I,OAASgJ,EAAQhJ,KAE/E,CACF,CAKA,oBAAAiH,GACE,MAAMjH,KAAEA,EAAIO,MAAEA,GAAUb,KAAKiE,eACvBmB,EAAsD,cAAjCpF,KAAKuD,QAAQS,gBAElC4D,EAAgB5H,KAAKmE,MAAMiC,cAAc,uBAG/C,GAFAwB,EAAcnC,UAAY,GAEtBL,EAAoB,CAEtB,MAAMyC,EAAc7H,KAAKwD,SAASxB,eAAe1B,EAAMO,GACjDiH,EAAiB9H,KAAKwD,SAAStB,aAAa5B,EAAMO,EAAO,GAG/D,IAAK,IAAIS,EAAI,EAAGA,EAAIwG,EAAgBxG,IAAK,CACvC,MAAMyG,EAAYvD,SAASS,cAAc,OACzC8C,EAAU7C,UAAY,0BACtB0C,EAAclD,YAAYqD,EAC5B,CAGA,MAAMI,EAAQnI,KAAKwD,SAASH,MAC5B,IAAK,IAAI1B,EAAM,EAAGA,GAAOkG,EAAalG,IAAO,CAC3C,MAAMqG,EAAUxD,SAASS,cAAc,OACvC+C,EAAQ9C,UAAY,+BAGpB,MAAMqE,EAAcvJ,KAAKuD,QAAQO,mBAC7B9D,KAAKwD,SAAShB,kBAAkBb,GAChCA,EAGEuF,EAAWlH,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAOc,GAClD+E,EAAgBQ,EAASlG,UAE/BgH,EAAQvC,UAAY,iDACkB8D,2DACE7C,qBAGxCsB,EAAQE,QAAQvG,IAAMA,EACtBqG,EAAQE,QAAQrH,MAAQA,EACxBmH,EAAQE,QAAQ5H,KAAOA,EACvB0H,EAAQE,QAAQc,QAAU9B,EAASlG,UACnCgH,EAAQE,QAAQd,UAAYF,EAASpG,WACrCkH,EAAQE,QAAQf,SAAWD,EAAStG,cAGhCN,IAAS6H,EAAM7H,MAAQO,IAAUsH,EAAMtH,OAASc,IAAQwG,EAAMxG,KAChEqG,EAAQI,UAAUC,IAAI,0BAIpBrI,KAAKkE,cACL5D,IAASN,KAAKkE,aAAa5D,MAC3BO,IAAUb,KAAKkE,aAAarD,OAC5Bc,IAAQ3B,KAAKkE,aAAavC,KAC5BqG,EAAQI,UAAUC,IAAI,mBAGxBT,EAAclD,YAAYsD,EAC5B,CACF,KAAO,CAEL,MAAMd,EAAWlH,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAO,GAClDsG,EAAWD,EAAStG,cACpBwG,EAAYF,EAASpG,WAErBqI,EAAW,IAAIpH,KAAKoF,EAAUC,EAAW,GAAGjF,SAC5C0F,EAAc,IAAI9F,KAAKoF,EAAUC,EAAY,EAAG,GAAGpG,UAGzD,IAAK,IAAIM,EAAI,EAAGA,EAAI6H,EAAU7H,IAAK,CACjC,MAAMyG,EAAYvD,SAASS,cAAc,OACzC8C,EAAU7C,UAAY,0BACtB0C,EAAclD,YAAYqD,EAC5B,CAGA,MAAMe,EAAY,IAAI/G,KACtB,IAAK,IAAImB,EAAI,EAAGA,GAAK2E,EAAa3E,IAAK,CACrC,MAAM8E,EAAUxD,SAASS,cAAc,OACvC+C,EAAQ9C,UAAY,+BAGpB,MAAMqE,EAAcrG,EAGdsG,EAAc,IAAIzH,KAAKoF,EAAUC,EAAWlE,GAC5CuG,EAAUzJ,KAAKwD,SAAS9C,YAAY8I,GACpC9C,EAAgB1G,KAAKuD,QAAQO,mBAC/B9D,KAAKwD,SAAShB,kBAAkBiH,EAAQ9H,KACxC8H,EAAQ9H,IAsBZ,GApBAqG,EAAQvC,UAAY,iDACkB8D,2DACE7C,qBAGxCsB,EAAQE,QAAQvG,IAAM8H,EAAQ9H,IAC9BqG,EAAQE,QAAQrH,MAAQ4I,EAAQ5I,MAChCmH,EAAQE,QAAQ5H,KAAOmJ,EAAQnJ,KAC/B0H,EAAQE,QAAQc,QAAU9F,EAC1B8E,EAAQE,QAAQd,UAAYA,EAC5BY,EAAQE,QAAQf,SAAWA,EAGvBA,IAAa2B,EAAUlI,eACvBwG,IAAc0B,EAAUhI,YACxBoC,IAAM4F,EAAU9H,WAClBgH,EAAQI,UAAUC,IAAI,0BAIpBrI,KAAKkE,aAAc,CACrB,MAAMwF,EAAe1J,KAAKwD,SAAS5B,YACjC5B,KAAKkE,aAAa5D,KAClBN,KAAKkE,aAAarD,MAClBb,KAAKkE,aAAavC,KAEhBwF,IAAauC,EAAa9I,eAC1BwG,IAAcsC,EAAa5I,YAC3BoC,IAAMwG,EAAa1I,WACrBgH,EAAQI,UAAUC,IAAI,kBAE1B,CAEAT,EAAclD,YAAYsD,EAC5B,CACF,CACF,CAKA,oBAAAnD,GAEE7E,KAAKmE,MAAMiC,cAAc,qBAAqBuD,iBAAiB,QAAS,KACtE3J,KAAKiE,eAAe3D,OACpBN,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,qBAAqBuD,iBAAiB,QAAS,KACtE3J,KAAKiE,eAAe3D,OACpBN,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,sBAAsBuD,iBAAiB,QAAS,KACvE3J,KAAKiE,eAAepD,QAChBb,KAAKiE,eAAepD,MAAQ,IAC9Bb,KAAKiE,eAAepD,MAAQ,GAC5Bb,KAAKiE,eAAe3D,QAEtBN,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,sBAAsBuD,iBAAiB,QAAS,KACvE3J,KAAKiE,eAAepD,QAChBb,KAAKiE,eAAepD,MAAQ,KAC9Bb,KAAKiE,eAAepD,MAAQ,EAC5Bb,KAAKiE,eAAe3D,QAEtBN,KAAK4E,WAIH5E,KAAKuD,QAAQK,gBAAkB5D,KAAKuD,QAAQQ,aAC9C/D,KAAKmE,MAAMiC,cAAc,0BAA0BuD,iBAAiB,QAAS,KAC3E,MAAMzC,EAAWlH,KAAKwD,SAAS5B,YAAY5B,KAAKiE,eAAe3D,KAAMN,KAAKiE,eAAepD,MAAO,IAChGqG,EAAS0C,YAAY1C,EAAStG,cAAgB,GAC9CZ,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYwG,GAChDlH,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,0BAA0BuD,iBAAiB,QAAS,KAC3E,MAAMzC,EAAWlH,KAAKwD,SAAS5B,YAAY5B,KAAKiE,eAAe3D,KAAMN,KAAKiE,eAAepD,MAAO,IAChGqG,EAAS0C,YAAY1C,EAAStG,cAAgB,GAC9CZ,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYwG,GAChDlH,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,2BAA2BuD,iBAAiB,QAAS,KAC5E,MAAMzC,EAAWlH,KAAKwD,SAAS5B,YAAY5B,KAAKiE,eAAe3D,KAAMN,KAAKiE,eAAepD,MAAO,IAChGqG,EAAS2C,SAAS3C,EAASpG,WAAa,GACxCd,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYwG,GAChDlH,KAAK4E,WAGP5E,KAAKmE,MAAMiC,cAAc,2BAA2BuD,iBAAiB,QAAS,KAC5E,MAAMzC,EAAWlH,KAAKwD,SAAS5B,YAAY5B,KAAKiE,eAAe3D,KAAMN,KAAKiE,eAAepD,MAAO,IAChGqG,EAAS2C,SAAS3C,EAASpG,WAAa,GACxCd,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYwG,GAChDlH,KAAK4E,WAIP5E,KAAKmE,MAAMiC,cAAc,qBAAqBuD,iBAAiB,QAAUG,IACvE,GAAIA,EAAEC,OAAO3B,UAAU4B,SAAS,mBAAoB,CAClD,MAAMrI,EAAMwB,SAAS2G,EAAEC,OAAO7B,QAAQvG,KAChCd,EAAQsC,SAAS2G,EAAEC,OAAO7B,QAAQrH,OAClCP,EAAO6C,SAAS2G,EAAEC,OAAO7B,QAAQ5H,MAEjCK,EAAgB,IAAIoB,KAAKzB,EAAMO,EAAOc,GACtCH,EAAgBxB,KAAKwD,SAAS9C,YAAYC,GAEhDX,KAAKkE,aAAe1C,EACpBxB,KAAKiE,eAAiBzC,EACtBxB,KAAK4E,SAED5E,KAAKuD,QAAQE,UACfzD,KAAKuD,QAAQE,SAAS,CACpBwG,UAAWzI,EACX0I,UAAWvJ,IAKXX,KAAKuD,QAAQG,eACf1D,KAAKuD,QAAQG,aAAayG,MAAQ,GAAG3I,EAAcG,OAAOH,EAAcX,SAASW,EAAclB,QAGjGN,KAAK8E,MACP,KAKJ,MAAMsF,EAAepK,KAAKuD,QAAQQ,WAAa,sBAAwB,eACvE/D,KAAKmE,MAAMiC,cAAcgE,GAAcT,iBAAiB,QAAUG,IAChE,GAAIA,EAAEC,OAAOM,QAAQ,iBAAmBP,EAAEC,OAAOM,QAAQ,iBAAkB,CACzE,MAAMrC,EAAU8B,EAAEC,OAAOM,QAAQ,eAC3B1I,EAAMwB,SAAS6E,EAAQE,QAAQvG,KAC/Bd,EAAQsC,SAAS6E,EAAQE,QAAQrH,OACjCP,EAAO6C,SAAS6E,EAAQE,QAAQ5H,MAKtC,GAHAN,KAAKkE,aAAe,CAAE5D,OAAMO,QAAOc,OACnC3B,KAAK4E,SAED5E,KAAKuD,QAAQE,SAAU,CACzB,MAAM9C,EAAgBX,KAAKwD,SAAS5B,YAAYtB,EAAMO,EAAOc,GAC7D3B,KAAKuD,QAAQE,SAAS,CACpBwG,UAAW,CAAE3J,OAAMO,QAAOc,OAC1BuI,UAAWvJ,GAEf,CAGIX,KAAKuD,QAAQG,eACf1D,KAAKuD,QAAQG,aAAayG,MAAQ,GAAGxI,KAAOd,KAASP,KAGvDN,KAAK8E,MACP,IAIF9E,KAAKmE,MAAMiC,cAAc,iBAAiBuD,iBAAiB,QAAS,KAClE3J,KAAKiE,eAAiBjE,KAAKwD,SAASH,MACpCrD,KAAK4E,WAIPJ,SAASmF,iBAAiB,QAAUG,IAC9B9J,KAAKmE,QACJnE,KAAKmE,MAAM6F,SAASF,EAAEC,SACvBD,EAAEC,SAAW/J,KAAKuD,QAAQG,cAC5B1D,KAAK8E,QAGX,CAMA,OAAAwF,CAAQvJ,GACNf,KAAKiE,eAAiBjE,KAAKwD,SAAS9C,YAAYK,GAC5Cf,KAAKmE,OACPnE,KAAK4E,QAET,CAMA,eAAA2F,GACE,OAAOvK,KAAKkE,YACd"}