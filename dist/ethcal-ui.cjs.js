"use strict";class t{constructor(){this.monthNames=["Meskerem","Tikimt","Hidar","Tahsas","Tir","Yekatit","Megabit","Miazia","Ginbot","Sene","Hamle","Nehase","Pagume"],this.dayNames=["Ehud","Segno","Maksegno","Erob","Hamus","Arb","Kidame"]}toEthiopian(t){const e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),s=Math.floor((14-a)/12),o=e+4800-s,i=a+12*s-3;let r=n+Math.floor((153*i+2)/5)+365*o+Math.floor(o/4)-Math.floor(o/100)+Math.floor(o/400)-32045;const h=(r-1723856)%1461,l=h%365+365*Math.floor(h/1460);return{year:Math.floor((r-1723856)/1461)+1,month:Math.floor(l/30)+1,day:l%30+1}}toGregorian(t,e,a){const n=1461*(t-1)/4+30*(e-1)+a+1723856+32044,s=Math.floor((4*n+3)/146097),o=n-Math.floor(146097*s/4),i=Math.floor((4*o+3)/1461),r=o-Math.floor(1461*i/4),h=Math.floor((5*r+2)/153),l=r-Math.floor((153*h+2)/5)+1,c=h+3-12*Math.floor(h/10),p=100*s+i-4800+Math.floor(h/10);return new Date(p,c-1,l)}getDaysInMonth(t,e){return e<13?30:this.isLeapYear(t)?6:5}isLeapYear(t){return t%4==3}getDayOfWeek(t,e,a){return this.toGregorian(t,e,a).getDay()}getMonthName(t){return this.monthNames[t-1]||""}getDayName(t){return this.dayNames[t]||""}now(){return this.toEthiopian(new Date)}}exports.EthiopianCalendar=t,exports.EthiopianCalendarUI=class{constructor(e={}){this.calendar=new t,this.options={onSelect:e.onSelect||null,inputElement:e.inputElement||null,initialDate:e.initialDate||new Date,...e},this.currentEthDate=this.calendar.toEthiopian(this.options.initialDate),this.selectedDate=null,this.popup=null}show(){this.popup?this.popup.style.display="block":(this.popup=this.createPopup(),document.body.appendChild(this.popup),this.options.inputElement&&this.positionPopup(),this.render(),this.attachEventListeners())}hide(){this.popup&&(this.popup.style.display="none")}destroy(){this.popup&&(this.popup.remove(),this.popup=null)}createPopup(){const t=document.createElement("div");return t.className="ethcal-popup",t.innerHTML='\n      <div class="ethcal-header">\n        <button class="ethcal-prev-year" aria-label="Previous Year">&laquo;</button>\n        <button class="ethcal-prev-month" aria-label="Previous Month">&lsaquo;</button>\n        <div class="ethcal-current">\n          <span class="ethcal-month-name"></span>\n          <span class="ethcal-year"></span>\n        </div>\n        <button class="ethcal-next-month" aria-label="Next Month">&rsaquo;</button>\n        <button class="ethcal-next-year" aria-label="Next Year">&raquo;</button>\n      </div>\n      <div class="ethcal-weekdays">\n        <div>እሁድ</div>\n        <div>ሰኞ</div>\n        <div>ማክሰኞ</div>\n        <div>ረቡዕ</div>\n        <div>ሐሙስ</div>\n        <div>ዓርብ</div>\n        <div>ቅዳሜ</div>\n      </div>\n      <div class="ethcal-days"></div>\n      <div class="ethcal-footer">\n        <button class="ethcal-today">Today</button>\n        <button class="ethcal-close">Close</button>\n      </div>\n    ',t}positionPopup(){const t=this.options.inputElement.getBoundingClientRect();this.popup.style.position="absolute",this.popup.style.top=t.bottom+window.scrollY+5+"px",this.popup.style.left=t.left+window.scrollX+"px"}render(){const{year:t,month:e}=this.currentEthDate;this.popup.querySelector(".ethcal-month-name").textContent=this.calendar.getMonthName(e),this.popup.querySelector(".ethcal-year").textContent=t,this.renderDays()}renderDays(){const{year:t,month:e}=this.currentEthDate,a=this.popup.querySelector(".ethcal-days");a.innerHTML="";const n=this.calendar.getDaysInMonth(t,e),s=this.calendar.getDayOfWeek(t,e,1);for(let t=0;t<s;t++){const t=document.createElement("div");t.className="ethcal-day ethcal-empty",a.appendChild(t)}for(let s=1;s<=n;s++){const n=document.createElement("div");n.className="ethcal-day",n.textContent=s,n.dataset.day=s,n.dataset.month=e,n.dataset.year=t;const o=this.calendar.now();t===o.year&&e===o.month&&s===o.day&&n.classList.add("ethcal-today-highlight"),this.selectedDate&&t===this.selectedDate.year&&e===this.selectedDate.month&&s===this.selectedDate.day&&n.classList.add("ethcal-selected"),a.appendChild(n)}}attachEventListeners(){this.popup.querySelector(".ethcal-prev-year").addEventListener("click",()=>{this.currentEthDate.year--,this.render()}),this.popup.querySelector(".ethcal-next-year").addEventListener("click",()=>{this.currentEthDate.year++,this.render()}),this.popup.querySelector(".ethcal-prev-month").addEventListener("click",()=>{this.currentEthDate.month--,this.currentEthDate.month<1&&(this.currentEthDate.month=13,this.currentEthDate.year--),this.render()}),this.popup.querySelector(".ethcal-next-month").addEventListener("click",()=>{this.currentEthDate.month++,this.currentEthDate.month>13&&(this.currentEthDate.month=1,this.currentEthDate.year++),this.render()}),this.popup.querySelector(".ethcal-days").addEventListener("click",t=>{if(t.target.classList.contains("ethcal-day")&&!t.target.classList.contains("ethcal-empty")){const e=parseInt(t.target.dataset.day),a=parseInt(t.target.dataset.month),n=parseInt(t.target.dataset.year);if(this.selectedDate={year:n,month:a,day:e},this.render(),this.options.onSelect){const t=this.calendar.toGregorian(n,a,e);this.options.onSelect({ethiopian:{year:n,month:a,day:e},gregorian:t})}this.options.inputElement&&(this.options.inputElement.value=`${e}/${a}/${n}`),this.hide()}}),this.popup.querySelector(".ethcal-today").addEventListener("click",()=>{this.currentEthDate=this.calendar.now(),this.render()}),this.popup.querySelector(".ethcal-close").addEventListener("click",()=>{this.hide()}),document.addEventListener("click",t=>{this.popup&&!this.popup.contains(t.target)&&t.target!==this.options.inputElement&&this.hide()})}setDate(t){this.currentEthDate=this.calendar.toEthiopian(t),this.popup&&this.render()}getSelectedDate(){return this.selectedDate}};
//# sourceMappingURL=ethcal-ui.cjs.js.map
